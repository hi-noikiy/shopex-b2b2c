(function(){var a={name:"localStorage",init:function(){if(!window.localStorage)return!1;this._storage=window.localStorage;return this},setStorage:function(a,b){this._storage.setItem(a,b);return!0},getStorage:function(a,b){var c=this._storage.getItem(a);b(c?c:null)},removeStorage:function(a){this._storage.removeItem(a);return!0},clearStorage:function(){if(this._storage.clear)this._storage.clear();else for(i in this._storage)this._storage[i].value&&this.remove(i);return!0}},b={name:"globalStorage",
init:function(){if(!window.globalStorage)return!1;this._storage=globalStorage[location.hostname];return this},setStorage:function(a,b){this._storage.setItem(a,b);return!0},getStorage:function(a,b){var c=this._storage.getItem(a);b(c?c.value:null)},removeStorage:function(a){this._storage.removeItem(a);return!0},clearStorage:function(){if(this._storage.clear)this._storage.clear();else for(i in this._storage)this._storage[i].value&&this.remove(i);return!0}},c={name:"userData",init:function(){this.Master=
"ie6+";if(!$.browser.msie)return!1;this.file_name="ECStore_VS";if(!this._storage)try{var a=this._storage=document.createElement("input");a.type="hidden";a.addBehavior("#default#userData");document.body.appendChild(a);a.save(this.file_name)}catch(b){}return this},setStorage:function(a,b){this._storage.setAttribute(a,b);this._storage.save(this.file_name);return!0},getStorage:function(a,b){this._storage.load(this.file_name);b(this._storage.getAttribute(a))},removeStorage:function(a){this._storage.removeAttribute(a);
this._storage.save(this.file_name);return!0},clearStorage:function(){this._storage.load(this.file_name);var a=new Date;a.setMinutes(a.getMinutes()-1);this._storage.expires=a.toUTCString();this._storage.save(this.file_name);return!0}},e={name:"sessionStorage",init:function(){if(!window.openDatabase)return!1;this._storage=window.openDatabase("viewState","1.0","ECStore ViewState Storage",2E4);this._createTable();return this},setStorage:function(a,b){this._storage.transaction(function(c){c.executeSql("SELECT v FROM SessionStorage WHERE k = ?",
[a],function(c,e){e.rows.length?c.executeSql("UPDATE SessionStorage SET v = ?  WHERE k = ?",[b,a]):c.executeSql("INSERT INTO SessionStorage (k, v) VALUES (?, ?)",[a,b])})});return!0},getStorage:function(a,b){this._storage.transaction(function(c){v=c.executeSql("SELECT v FROM SessionStorage WHERE k = ?",[a],function(a,c){if(c.rows.length)return b(c.rows.item(0).v);b(null)})})},removeStorage:function(a){this._storage.transaction(function(b){b.executeSql("DELETE FROM SessionStorage WHERE k = ?",[a])});
return!0},clearStorage:function(){this._storage.transaction(function(a){a.executeSql("DROP TABLE SessionStorage",[])});return!0},_createTable:function(){this._storage.transaction(function(a){a.executeSql("SELECT COUNT(*) FROM SessionStorage",[],function(){},function(a,b){a.executeSql("CREATE TABLE SessionStorage (k TEXT, v TEXT)",[],function(){})})})}},g={setStorage:function(){},getStorage:function(){},removeStorage:function(){},clearStorage:function(){}};BrowserStore=new Class({init:function(){this.storage=
e.init()||b.init()||a.init()||c.init()||g;return this},set:function(a,b){b&&"string"===typeof b&&this.storage.setStorage(a,b);return this},get:function(a,b){this.storage.getStorage(a,b)},remove:function(a){if(!a||!this.storage)return!1;a&&this.storage.removeStorage(a);return this},clear:function(){if(!this.storage)return!1;this.storage.clearStorage();return this}})})();
(function(){browserStore=null;withBrowserStore=function(a){if(browserStore)return a(browserStore);$(function(){if(browserStore=new BrowserStore)a(browserStore);else $(window).on("load",function(){a(browserStore=new BrowserStore)})})}})();var Tips=new Class({options:{form:"inline",target:".form-row",type:"error","class":"caution"},init:function(a){this.setOptions(a);this.target=$(this.options.target);return this.build()},build:function(a){a&&this.setOptions(a);a=this.options;var b="inline"==a.form?"<span>":"<div>";this.element=this.target.data("tipInstance")||$(b,{style:"display: none;","class":"icon-"+("success"===a.type?"checkmark-c":"alert")+" "+a["class"]});this.target.data("tipInstance",this.element);this.element[a.where||"appendTo"](this.target);
this.trigger("load");return this},show:function(a,b,c){c=c||{};b&&(c.type=b);this.element?this.element.attr("class",this.element.attr("class").replace(/\b(icon-)[\w-]+\b/,"$1"+("success"===(c.type||this.options.type)?"checkmark-c":"alert"))):this.build(c);this.element.html(a||"").css("display","");this.trigger("show");return this},hide:function(a){if(this.element=this.target.data("tipInstance"))return a?this.element.remove():this.element.css("display","none"),this.trigger("hide"),this},success:function(a,
b){return this.show(a,"success",b)},error:function(a,b){return this.show(a,"error",b)}});var passwordStrength=function(a,b,c){var e=/[A-Z]/g,g=RegExp("(.{"+parseInt(a.length/2)+",})","g"),k="poor",k=-1,k=!a||5>a.length?-1:parseInt(a.length/5)-1;a.match(g)&&k--;(a.match(/[a-z]/g)||a.match(e))&&k++;a.match(/\d/g)&&k++;a.match(/[\W_]/g)&&k++;5<a.length&&2>k&&k++;switch(k){case -1:case 0:case 1:k="poor";break;case 2:k="weak";break;case 3:k="good";break;default:k="strong"}b.className=(c?c+" ":"")+"password-"+k};
passwordStrength.init=function(a,b){$(a).each(function(a,e){if(e&&(b=b?$(e.parentNode).find(b):$(e).next())){var g=b[0].className;$(e).on("input propertychange",function(a){"propertychange"===a.type&&a.propertyName&&"value"!==a.propertyName.toLowerCase()||(a=this.value,passwordStrength.prev!==a&&passwordStrength(a,b[0],g),passwordStrength.prev=a)})}})};
function changeVerify(a,b){$(a).each(function(a){a=$(this);var e,g;"IMG"===this.tagName?(g=$(this),e=a.attr("src")):(g=a.siblings("img"),e=a.attr("href"));if(b)a.on("click",function(){changeCode(g,e)});else changeCode(g,e)})}function changeCode(a,b){b=b||a.attr("src");var c=+new Date,e=b.match(/\b_=([\d]+)\b/);b=e?b.replace(e[1],c):b+((-1<b.indexOf("?")?"&":"?")+"_="+c);a.attr("src",b);return!1}function checkAll(a,b){$(b).prop("checked",$(a).prop("checked"))}
var Placeholder={support:function(){return"placeholder"in document.createElement("input")}(),className:"placeholder",init:function(){this.support||this.create($("input, textarea"))},build:function(a,b){var c=a.parent(),e=Placeholder;"static"==c.css("position")&&c.css("position","relative");return a.prev("."+this.className)||$("<span>",{"class":this.className,html:b,style:"visibility:hidden;"}).before(a).locate({target:a,from:"lc",to:"lc",offset:{x:4},offsetParent:!0}).on("click",function(b){e.hide(this);
a.focus()})},create:function(a){var b=this;$(a).each(function(a){a=$(this);if(!b.support&&a.attr("placeholder")){var e=a.attr("placeholder");a.data("placeholder",b.build(a,e));b.show(a);a.on("focusin",function(a){b.hide(this)}).on("focusout",function(a){b.show(this)})}})},show:function(a){!this.support&&""===a.value&&$(a).is(":visible")&&"hidden"!==$(a).css("visibility")&&$(a).data("placeholder").css("visibility","visible")},hide:function(a){this.support||($(a).data("placeholder")||$(a)).css("visibility",
"hidden")}};
$(function(){document.forms.length&&(passwordStrength.init($("form .auto-password-check-handle"),".password-check"),changeVerify($("form .auto-change-verify-handle"),!0),$("form .action-remember-account").on("change",function(a){this.checked?$.cookie("S[SIGN][REMEMBER]","1",365):$.cookie("S[SIGN][REMEMBER]","0",365)}).trigger("change"),$("form [data-remote]").on("change",function(a){var b=$(this);a=this.value;var c=this.name,e=$(this).data("remote"),g=b.data("remoteType")||b.parents("form").attr("method"),k=
b.data("remoteCallback");if(e&&c&&a)$[g](e,c+"="+a,function(a){"string"===typeof a&&(a=JSON.parse(a));if(k)return k.call(b,a);var c=new Tips({target:b.closest(".form-row")});if(a.error)return c.error(a.message);if(a.success)return c.success(a.message)})}));Placeholder.init()});var validatorMap={required:["此项必填",function(a,b,c){return"select"==c?(c=a.selectedIndex,b=a.options[c].value,0<=c&&""!=b&&"_NULL_"!=b):null!==b&&0!==b.length}],minlength:[function(a,b,c){return"null"!=$.type(c)?"输入不正确，至少"+c+"个字符":""},function(a,b,c,e,g){return null===b||""===b||("null"!=$.type(g)?b.length>=+g:!0)}],maxlength:[function(a,b,c){return"null"!=$.type(c)?"输入不正确，最多"+c+"个字符":""},function(a,b,c,e,g){return null===b||""===b||("null"!=$.type(g)?b.length<=+g:!0)}],number:["请填写数值",function(a,
b){return!isNaN(b)&&!/^\s+$/.test(b)}],digits:["只能填写数字",function(a,b){return!/[^\d]/.test(b)}],posint:["请填写正整数",function(a,b){return!/[^\d]/.test(b)&&0<b}],natural:["请填写大于等于0的整数",function(a,b){return!/[^\d]/.test(b)&&0<=b}],pay_password:["至少包含数字、大写英文、小写英文中的两种",function(a,b){return null===b||""==b||/^(?=.*[0-9].*)(?=.*[A-Z].*)|^(?=.*[0-9].*)(?=.*[a-z].*)|(?=.*[A-Z].*)(?=.*[a-z].*)./.test(b)}],positive:["请填写大于0的数值",function(a,b){return!isNaN(b)&&!/^\s+$/.test(b)&&0<b}],nonneg:["请填写大于等于0的数值",function(a,
b){return!isNaN(b)&&!/^\s+$/.test(b)&&0<=b}],alpha:["只能填写英文字母",function(a,b){return null===b||""==b||/^[a-zA-Z]+$/.test(b)}],alphanumber:["请填写英文字母或者数字",function(a,b){return!/\W/.test(b)||/^[a-zA-Z0-9]+$/.test(b)}],alphanumcn:["请填写英文字母、中文或数字",function(a,b){return!/\W/.test(b)||/^[\u4e00-\u9fa5a-zA-Z0-9]+$/.test(b)}],uncnchar:["不能填写中文字符",function(a,b){return!/\W/.test(b)||!/^[\u4e00-\u9fa5]+$/.test(b)}],date:["请填写日期，格式yyyy-mm-dd",function(a,b){return null===b||""==b||/^(?:19|20)[0-9]{2}[\/-](?:[1-9]|0[1-9]|1[012])[\/-](?:[1-9]|0[1-9]|[12][0-9]|3[01])$/.test(b)}],
email:["请填写正确的email地址",function(a,b){return null===b||""==b||/^[a-z\d][a-z\d_.]*@[\w-]+(?:\.[a-z]{2,})+$/i.test(b)}],emaillist:['请填写正确的email地址，以","或";"分隔',function(a,b){return null===b||""==b||/^(?:[a-z\d][a-z\d_.]*@[\w-]+(?:\.[a-z]{2,})+[,;\s]?)+$/i.test(b)}],mobile:["请填写正确的手机号码",function(a,b){return null===b||""==b||/^0?1[34578]\d{9}$/.test(b)}],landline:["请填写正确的座机号码",function(a,b){return null===b||""==b||/^(0\d{2,3}-?)?[2-9]\d{5,7}(-\d{1,5})?$/.test(b)}],tel:["请填写正确的固话或手机号码",function(a,b){return null===
b||""==b||/^0?1[3458]\d{9}$|^(0\d{2,3}-?)?[2-9]\d{5,7}(-\d{1,5})?$/.test(b)}],zip:["请填写正确的邮编",function(a,b){return null===b||""==b||/^\d{6}$/.test(b)}],url:["请填写正确的网址",function(a,b){var c=RegExp("^((https|http|ftp|rtsp|mms)?://)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$","i");return null===b||""==b||c.test(b)}],area:["请选择完整的地区",function(a,
b){return $(a).find("select").every(function(a){var b=a.value;return $(a).is(":visible")?""!=b&&"_NULL_"!=b:!0})}],equalto:["两次填写不一致",function(a,b,c,e,g){a=$(e).find('[name="'+g+'"]');return!a[0]||b===a.val()}],oneoftwo:["请至少填写一项",function(a,b,c,e,g){a=$(e).find('[name="'+g+'"]');return!a[0]||b||a.val()}],onerequired:["请至少选择一项",function(a,b,c,e){a=a.name;return $(e).find("input:checked[type="+c+"]"+(a?'[name="'+a+'"]':"")).length}]},validation=function(a,b){"string"===typeof b&&(b={range:b});b=$.extend({group:".form-row",
tips:{form:"inline","class":"caution"}},b||{});a=a?$(a):null;if(!a)return!0;var c=a.data("validateConfig"),e=dataOptions(a,"validate");"string"===typeof c&&(c=$.parseJSON(c));b=$.extend(b,c||{},e);a.is("form")&&a.attr("novalidate","novalidate");var g=[];(a.is("form")||"all"===b.range?a.find("[data-validate], [pattern], [type=number], [type=email], [type=tel], [type=url], [type=date], [required], [minlength], [maxlength], [data-equalto], [data-oneoftwo]"):$(a)).each(function(c){var d=$(this);if(!d.is(":visible"))return!0;
var e=[];d.attr("data-validate")&&(e=d.attr("data-validate").split(" "));d.attr("required")&&e.unshift("required");c=d.attr("data-caution")||"";var l=d.attr("pattern"),m=RegExp("^(?:"+l+")$"),q="custom_"+$.guid++;c=c?c.split(/&&|&amp;&amp;/):[];l&&(validatorMap[q]||(validatorMap[q]=[c[c.length-1]||"",function(a,f){return null===f||""===f||m.test(f)}]),e.push(q));$.each(["number","url","email","tel","date"],function(a,f){d.attr("type")===f&&e.push(f)});$.each(["minlength","maxlength","data-equalto",
"data-oneoftwo"],function(a,f){d.attr(f)&&e.push(f)});if(!e.length)return!0;for(var s=!1,l=0,q=e.length;l<q;l++){var n=e[l],s=d.attr(n),n=n.replace(/^data-/,"");if(n=validatorMap[n]){var n=n instanceof Array?n:["",n],u=d.closest(b.group);b.tips.target=u;var p=new Tips(b.tips),r=c[l]||("function"===typeof n[0]?n[0](d[0],d.val(),s):n[0]),n=n[1]||function(){return!0},f=d.is("input","select","textarea");if(n(d[0],d.val(),d.attr("type"),a.is("[data-validate], [pattern], [type=number], [type=email], [type=tel], [type=url], [type=date], [required], [minlength], [maxlength], [data-equalto], [data-oneoftwo]")?
b.parent||a.parents("form")[0]||a.parent()[0]:a[0],s))p.hide(),u.removeClass("has-error"),s=!0;else{r&&(p.error(r),u.addClass("has-error"));if(!1!==d[0].bindEvent){var y=f?"onchange":"onmouseout";d[0][y]=function(f){f=f||window.event;var c=$(this);/mouseout$/i.test(f.type)&&c.is(f.target||f.srcElement)||validation(c[0],$.extend(!0,{parent:a.is("[data-validate], [pattern], [type=number], [type=email], [type=tel], [type=url], [type=date], [required], [minlength], [maxlength], [data-equalto], [data-oneoftwo]")?
a.parents("form")[0]||a.parent()[0]:a[0]},b));this[y]=null}}s=!1;break}}else s=!0}s||g.push(d)});return g.length?(g.shift().focus(),!1):!0};$.fn.validation=function(a){return validation(this,a)};
(function(){var a=function(a,c){var e=$(a),g,k,d={},h=function(a,b){b=b||{};var c={},d;d="submit"===a.attr("type");var e=dataOptions(a,"ajax");if("string"===typeof e.config)try{c=JSON.parse(e.config)||{},delete e.config}catch(h){}else $.isPlainObject(e.config)&&(c=e.config,delete e.config);d&&(g=a.parents("form"));d=g&&g[0]?{url:g[0].action,data:g.serialize()+"&response_json=true",type:g[0].method||"post"}:{url:a.attr("href"),data:"response_json=true",type:a.data("ajaxMethod")||"post"};return c=$.extend(!0,
d,b,c,e)},l=function(a){e[0]&&e.removeClass(c.disabled);c.syncCache&&e[0]&&e.data("ajaxCache",c);d.json?m(a):location.href=c.url+(/\?/.test(c.url)?"&":"?")+c.data},m=function(a){function b(){"function"===typeof c.callback&&c.callback(a,e);d&&("back"==d?history.back():"reload"==d?location.reload():location.href=d)}if(a){if(c.progress)return c.progress.call(null,a);var d=a.redirect,h;c.showMessage&&!["error","success"].every(function(d){h=a.message;if(!h||!a[d])return!0;if(c.inject){if(d!==c.tipHidden){var e=
h,f=$(c.inject),y=c.position,B=c.ajaxTip;d+=c.tipCls;var A;f&&(A=f.getParent(),k=A.getElement("."+B),A&&k?k.html(e):$('<div class="'+d+" "+B+'">'+e+"</div>").appendTo(f,y))}}else Message[d](h,c.hideDelay,b);return!1})||b()}};if(e||e.length)c=h(e,c);return c=$.extend({disabled:"disabled",hideDelay:3,showMessage:!0,position:"before",tipCls:"-tip",ajaxTip:"ajax-tip",beforeSend:function(){if(e.length){var a;(a=e.hasClass(c.disabled))||(a={},a=g||a.data,a=a instanceof jQuery&&!validation(a)?!1:!0,(a=!a)||
(a=e.data("ajaxCache"),c.syncCache&&a?(a.success(d.data),a=!0):a=!1));a||e.addClass(c.disabled)}},success:function(a,b,e){d.data=a;b=e.getResponseHeader("Content-type");/application\/json/.test(b)?("string"===typeof a&&(a=$.parseJSON(a)),d.json=a,l(a)):c.update?("function"===typeof c.callback&&c.callback(e),$(c.update).html(a)):(a=/(ecma|java)script/.test(b)?$.globalEval(a):evalScripts(a,null,!0),l(a))},error:function(){e[0]&&e.removeClass(c.disabled)}},c||{})};this.async=function(b,c,e){if(b.hasClass("disabled"))return!1;
if($.isPlainObject(c))e=c;else if(isElement(c)){if(!validation(c,e))return b.removeClass("disabled"),!1;if(e&&!1===e.async)return}else if(c=b.data("ajaxCache"))return $.ajax(c);e=a(b,e);return $.ajax(e)};this.Event_Group={_request:{fn:async}}})();
$(document).on("click",function(a){target=$(a.target);elem=target.closest("[type=submit]");elem=elem.length?elem:target.closest("[rel]");if(elem[0]&&9!==elem[0].nodeType&&!elem[0].disabled){var b=elem.parents("form"),c=elem.attr("rel"),e=Event_Group[c],g;if(b[0]&&"false"===b.attr("data-async"))return validation(b);if("submit"===elem[0].type&&b[0]&&b.attr("target"))return async(elem,b,{async:!1});if("submit"===elem[0].type&&"_request"!==c)return a.preventDefault(),async(elem,b);if(e){g=e.fn;e=e.loader;
a.preventDefault();if(elem.attr(c))return elem;e?$LAB.script(e).wait(function(){g&&g(elem,b)}):g&&g(elem,b)}}});var AreaWidget=function(a){var b=this;b.options={dataUrl:"data.json",select:null,level:3,name:"area[]",initData:null};var c=function(a){b.box.empty();b.data=a;b.nowList=[];b.selectList=[];b.selected=[];for(a=0;a<b.options.level;a++)b.selectList[a]=0==a?$("<select></select>").appendTo(b.box).change(e):$('<select style="display:none;"></select>').appendTo(b.box).change(e);var c="";$.each(b.data,function(a,d){c+="<option value='"+b.data[a].id+"'>"+b.data[a].value+"</option>"});b.selectList[0].html('<option value="">-请选择-</option>'+
c);b.nowList[0]=b.data;if(b.options.initData){b.input=$('<input type="hidden" name="'+b.options.name+'" value="'+b.options.initData+'">').appendTo(b.box);var d=b.options.initData.split(",");$.each(b.selectList,function(a,b){b.val(d[a]).trigger("change")})}else b.input=$('<input type="hidden" name="'+b.options.name+'">').appendTo(b.box)},e=function(){var a=$(this),c=a.find("option:selected").index()-1,d=a.index();if(b.selected[d+1])for(var e=d+1;e<b.options.level;e++)b.selectList[e].hide(),b.selected.pop();
a.val()?b.selected[d]=a.val():delete b.selected[d];b.input.val(b.selected.join(","));if(d+1<b.options.level){b.nowList[d+1]=b.nowList[d][c].children;if("undefined"===typeof b.nowList[d+1])return b.nowList[d+1]=null,b.selectList[d+1].html("<option> -- </option>"),0;var l="";$.each(b.nowList[d+1],function(a,c){l+="<option value='"+b.nowList[d+1][a].id+"'>"+b.nowList[d+1][a].value+"</option>"});b.selectList[d+1].show().html('<option value="">请选择</option>'+l)}};(function(){b.options=$.extend(b.options,
a);b.box=b.options.select;$.ajax({type:"GET",url:b.options.dataUrl,dataType:"json",success:function(a){a?c(a):b.box.html("地区数据加载异常,请检查网络。")}})})()};$.fn.multiSelect=function(a){a=new AreaWidget($.extend({select:this},a||{}));return $(this).data("multiSelectInstance",a)};var priceControl={spec:{decimals:2,dec_point:".",thousands_sep:"",sign:"￥"},format:function(a,b){var c,e=this.spec.sign||"";if(!a&&0!==a||isNaN(+a))return a;a=parseFloat(a);this.spec.cur_rate&&(a*=this.spec.cur_rate);a=Math.round(a*Math.pow(10,this.spec.decimals))/Math.pow(10,this.spec.decimals)+"";var g=a.indexOf(".");0>g?(g=a.length,c=""):c=a.substr(g+1);for(;c.length<this.spec.decimals;)c+="0";for(var k=[];0<g;)if(2<g)g-=3,k.unshift(a.substr(g,3));else{k.unshift(a.substr(0,g));break}c||(this.spec.dec_point=
"");b&&(e='<span class="price-currency">'+e+"</span>");return e+k.join(this.spec.thousands_sep)+this.spec.dec_point+c},number:function(a){if(!a)return null;if(isNaN(+a)){if(a instanceof jQuery||a.nodeName&&1===a.nodeType)a=$(a).val()||$(a).text();0==a.indexOf(this.spec.sign)&&(a=a.split(this.spec.sign)[1])}return+a},calc:function(a,b,c,e){if(!b&&0!==b)return null;if(c){a=a&&"add"!=a?-1:1;var g=1,k=1;b instanceof Array&&b.length&&(g=b[1],b=b[0]);c instanceof Array&&c.length&&(k=c[1],c=c[0]);var d=
Math.pow(10,this.spec.decimals*this.spec.decimals);b=Math.abs(g*d*this.number(b)+a*k*d*this.number(c))/d}else b=this.number(b);e||(b=this.format(b));return b},add:function(a,b,c){return this.calc("add",a,b,c)},diff:function(a,b,c){return this.calc("diff",a,b,c)}};function updateCartNumber(a){a=$(a||".up-cat-number");var b=$(a).attr("data-type"),c;1==b?c=$.cookie("CARTNUMBER"):2==b&&(c=$.cookie("CARTVARIETY"));$(a).text(c)}
$(function(){$("body").on("click",".show-pics a",function(a){a.preventDefault();if(a=$(this).attr("href"))$.dialog($('<div><div class="show-pic-dialog"><div class="show-img"><img src="'+a+'"></div></div></div>'),{width:500,modal:!0,title:"查看大图"});else return!1})});(function(a){a.fn.imagezoom=function(b){var c={xzoom:310,yzoom:310,offset:10,position:"BTR",preload:1};b&&a.extend(c,b);var e="",g=this;a(this).bind("mouseenter",function(b){var d=a(this).offset().left,h=a(this).offset().top,l=a(this).get(0).offsetWidth,m=a(this).get(0).offsetHeight;b=a(this).parent().offset().left;var q=a(this).parent().offset().top,s=a(this).parent().width();a(this).parent().height();e=a(this).attr("alt");var n=a(this).attr("rel");a(this).attr("alt","");0==a("div.zoomDiv").get().length&&
a(document.body).append("<div class='zoomDiv'><img class='bigimg' src='"+n+"'/></div><div class='zoomMask'>&nbsp;</div>");"BTR"==c.position?leftpos=b+s+c.offset+c.xzoom>screen.width?b-c.offset-c.xzoom:b+s+c.offset:(leftpos=d-c.xzoom-c.offset,0>leftpos&&(leftpos=d+l+c.offset));a("div.zoomDiv").css({top:q,left:leftpos});a("div.zoomDiv").width(c.xzoom);a("div.zoomDiv").height(c.yzoom);a("div.zoomDiv").show();a(this).css("cursor","crosshair");a(document.body).mousemove(function(b){mouse=new MouseEvent(b);
if(mouse.x<d||mouse.x>d+l||mouse.y<h||mouse.y>h+m)a(g).attr("alt",e),a(document.body).unbind("mousemove"),a("div.zoomMask").remove(),a("div.zoomDiv").remove();else{b=a(".bigimg").get(0).offsetWidth;var k=a(".bigimg").get(0).offsetHeight,q="x",f="y";isNaN(f)|isNaN(q)&&(f=b/l,q=k/m,a("div.zoomMask").width(c.xzoom/f),a("div.zoomMask").height(c.yzoom/q),a("div.zoomMask").css("visibility","visible"));xpos=mouse.x-a("div.zoomMask").width()/2;ypos=mouse.y-a("div.zoomMask").height()/2;xposs=mouse.x-a("div.zoomMask").width()/
2-d;yposs=mouse.y-a("div.zoomMask").height()/2-h;xpos=mouse.x-a("div.zoomMask").width()/2<d?d:mouse.x+a("div.zoomMask").width()/2>l+d?l+d-a("div.zoomMask").width():xpos;ypos=mouse.y-a("div.zoomMask").height()/2<h?h:mouse.y+a("div.zoomMask").height()/2>m+h?m+h-a("div.zoomMask").height():ypos;a("div.zoomMask").css({top:ypos,left:xpos});a("div.zoomDiv").get(0).scrollLeft=xposs*f;a("div.zoomDiv").get(0).scrollTop=yposs*q}})});count=0;c.preload&&(a("body").append("<div style='display:none;' class='jqPreload"+
count+"'></div>"),a(this).each(function(){var b=a(this).attr("rel"),c=jQuery("div.jqPreload"+count+"").html();jQuery("div.jqPreload"+count+"").html(c+'<img src="'+b+'">')}))}})(jQuery);function MouseEvent(a){this.x=a.pageX;this.y=a.pageY}
$(function(){$(".jqzoom").imagezoom({xzoom:365,yzoom:365});$("#thumblist li span").mouseover(function(a){a.preventDefault();$(this).parents("li").addClass("active").siblings().removeClass("active");$(".jqzoom").attr("src",$(this).find("img").attr("mid"));$(".jqzoom").attr("rel",$(this).find("img").attr("big"))});$(".choose-item").click(function(){var a=$(this);$("#thumblist li").removeClass("active");var b=$(this).find("img");if(0<b.length){var c=$(this).find("img").attr("mid"),b=new Image;b.src=
c;b.onload=function(){$(".jqzoom").attr("src",a.find("img").attr("mid"));$(".jqzoom").attr("rel",a.find("img").attr("big"))}}});5<$("#thumblist li").length&&$(".next-group").show();$(".next-group").click(function(){$(this).hide().parent().find(".slider-thumb-wrap").addClass("scrolled").siblings(".pre-group").show()});$(".pre-group").click(function(){$(this).hide().parent().find(".slider-thumb-wrap").removeClass("scrolled").siblings(".next-group").show()})});(function(a,b){function c(){return new Date(Date.UTC.apply(Date,arguments))}function e(){var a=new Date;return c(a.getFullYear(),a.getMonth(),a.getDate())}function g(a){return function(){return this[a].apply(this,arguments)}}function k(f,b){function c(a,f){return f.toLowerCase()}var d=a(f).data(),e={},h,g=RegExp("^"+b.toLowerCase()+"([A-Z])");b=RegExp("^"+b.toLowerCase());for(var l in d)b.test(l)&&(h=l.replace(g,c),e[h]=d[l]);return e}function d(f){var b={};if(!p[f]&&(f=f.split("-")[0],!p[f]))return;
var c=p[f];a.each(u,function(a,f){f in c&&(b[f]=c[f])});return b}var h=a(window),l=function(){var f={get:function(a){return this.slice(a)[0]},contains:function(a){a=a&&a.valueOf();for(var f=0,b=this.length;f<b;f++)if(this[f].valueOf()===a)return f;return-1},remove:function(a){this.splice(a,1)},replace:function(f){f&&(a.isArray(f)||(f=[f]),this.clear(),this.push.apply(this,f))},clear:function(){this.length=0},copy:function(){var a=new l;a.replace(this);return a}};return function(){var b=[];b.push.apply(b,
arguments);a.extend(b,f);return b}}(),m=function(f,b){this.dates=new l;this.viewDate=e();this.focusDate=null;this._process_options(b);this.element=a(f);this.isInline=!1;this.isInput=this.element.is("input");this.hasInput=(this.component=this.element.is(".date")?this.element.find(".add-on, .input-comb-addon, .btn"):!1)&&this.element.find("input").length;this.component&&0===this.component.length&&(this.component=!1);this.picker=a(r.template);this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):
this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&this.picker.addClass("datepicker-rtl");this.viewMode=this.o.startView;this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(a,f){return parseInt(f)+1});this._allow_update=!1;this.setStartDate(this._o.min);this.setEndDate(this._o.max);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=!0;this.update();this.showMode();this.isInline&&this.show()};m.prototype=
{constructor:m,_process_options:function(f){this._o=a.extend({},this._o,f);f=this.o=a.extend({},this._o);var b=f.language;p[b]||(b=b.split("-")[0],p[b]||(b=n.language));f.language=b;switch(f.startView){case 2:case "decade":f.startView=2;break;case 1:case "year":f.startView=1;break;default:f.startView=0}switch(f.minViewMode){case 1:case "months":f.minViewMode=1;break;case 2:case "years":f.minViewMode=2;break;default:f.minViewMode=0}f.startView=Math.max(f.startView,f.minViewMode);!0!==f.multidate&&
(f.multidate=Number(f.multidate)||!1,f.multidate=!1!==f.multidate?Math.max(0,f.multidate):1);f.multidateSeparator=String(f.multidateSeparator);f.weekStart%=7;f.weekEnd=(f.weekStart+6)%7;b=r.parseFormat(f.format);-Infinity!==f.min&&(f.min=f.min?f.min instanceof Date?this._local_to_utc(this._zero_time(f.min)):r.parseDate(f.min,b,f.language):-Infinity);Infinity!==f.max&&(f.max=f.max?f.max instanceof Date?this._local_to_utc(this._zero_time(f.max)):r.parseDate(f.max,b,f.language):Infinity);f.daysOfWeekDisabled=
f.daysOfWeekDisabled||[];a.isArray(f.daysOfWeekDisabled)||(f.daysOfWeekDisabled=f.daysOfWeekDisabled.split(/[,\s]*/));f.daysOfWeekDisabled=a.map(f.daysOfWeekDisabled,function(a){return parseInt(a,10)});var b=String(f.orientation).toLowerCase().split(/\s+/g),c=f.orientation.toLowerCase(),b=a.grep(b,function(a){return/^auto|left|right|top|bottom$/.test(a)});f.orientation={x:"auto",y:"auto"};if(c&&"auto"!==c)if(1===b.length)switch(b[0]){case "top":case "bottom":f.orientation.y=b[0];break;case "left":case "right":f.orientation.x=
b[0]}else c=a.grep(b,function(a){return/^left|right$/.test(a)}),f.orientation.x=c[0]||"auto",c=a.grep(b,function(a){return/^top|bottom$/.test(a)}),f.orientation.y=c[0]||"auto"},_events:[],_secondaryEvents:[],_applyEvents:function(a){for(var c=0,d,e,h;c<a.length;c++)d=a[c][0],2===a[c].length?(e=b,h=a[c][1]):3===a[c].length&&(e=a[c][1],h=a[c][2]),d.on(h,e)},_unapplyEvents:function(a){for(var c=0,d,e,h;c<a.length;c++)d=a[c][0],2===a[c].length?(h=b,e=a[c][1]):3===a[c].length&&(h=a[c][1],e=a[c][2]),d.off(e,
h)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(function(f){-1===a.inArray(f.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:a.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(function(f){-1===a.inArray(f.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,
this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]];this._events.push([this.element,"*",{blur:a.proxy(function(a){this._focused_from=a.target},this)}],[this.element,{blur:a.proxy(function(a){this._focused_from=a.target},this)}]);this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{"mousedown touchstart":a.proxy(function(a){this.element.is(a.target)||this.element.find(a.target).length||
this.picker.is(a.target)||this.picker.find(a.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(b,c){var d=c||this.dates.get(-1),d=this._utc_to_local(d);this.element.trigger({type:b,
date:d,dates:a.map(this.dates,this._utc_to_local),format:a.proxy(function(a,b){0===arguments.length?(a=this.dates.length-1,b=this.o.format):"string"===typeof a&&(b=a,a=this.dates.length-1);b=b||this.o.format;var f=this.dates.get(a);return r.formatDate(f,b,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body");this.picker.show();this.place();this._attachSecondaryEvents();this._trigger("show")},hide:function(){!this.isInline&&this.picker.is(":visible")&&(this.focusDate=
null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||delete this.element.data().date},_utc_to_local:function(a){return a&&new Date(a.getTime()+6E4*
a.getTimezoneOffset())},_local_to_utc:function(a){return a&&new Date(a.getTime()-6E4*a.getTimezoneOffset())},_zero_time:function(a){return a&&new Date(a.getFullYear(),a.getMonth(),a.getDate())},_zero_utc_time:function(a){return a&&new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()))},getDates:function(){return a.map(this.dates,this._utc_to_local)},getUTCDates:function(){return a.map(this.dates,function(a){return new Date(a)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},
getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,b);this._trigger("changeDate");this.setValue()},setUTCDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,a.map(b,this._utc_to_local));this._trigger("changeDate");this.setValue()},setDate:g("setDates"),setUTCDate:g("setUTCDates"),setValue:function(){var a=this.getFormattedDate();this.isInput?this.element.val(a).change():
this.component&&this.element.find("input").val(a).change()},getFormattedDate:function(f){f===b&&(f=this.o.format);var c=this.o.language;return a.map(this.dates,function(a){return r.formatDate(a,f,c)}).join(this.o.multidateSeparator)},setStartDate:function(a){this._process_options({min:a});this.update();this.updateNavArrows()},setEndDate:function(a){this._process_options({max:a});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(a){this._process_options({daysOfWeekDisabled:a});this.update();
this.updateNavArrows()},place:function(){if(!this.isInline){var b=this.picker.outerWidth(),c=this.picker.outerHeight(),d=h.width(),e=h.height(),g=h.scrollTop(),l=parseInt(this.element.parents().filter(function(){return"auto"!==a(this).css("z-index")}).first().css("z-index"))+10,w=this.component?this.component.parent().offset():this.element.offset(),q=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),k=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),
m=w.left,p=w.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(m-=b-k)):(this.picker.addClass("datepicker-orient-left"),0>w.left?m-=w.left-10:w.left+b>d&&(m=d-b-10));b=this.o.orientation.y;"auto"===b&&(d=-g+w.top-c,e=g+e-(w.top+q+c),0<=e||0>d?b="top":0<=d&&(b="bottom"));this.picker.addClass("datepicker-orient-"+
b);p="top"===b?p+q:p-(c+parseInt(this.picker.css("padding-top")));this.picker.css({top:p,left:m,zIndex:l})}},_allow_update:!0,update:function(){if(this._allow_update){var b=this.dates.copy(),c=[],d=!1;arguments.length?(a.each(arguments,a.proxy(function(a,b){b instanceof Date&&(b=this._local_to_utc(b));c.push(b)},this)),d=!0):(c=(c=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val())&&this.o.multidate?c.split(this.o.multidateSeparator):[c],delete this.element.data().date);
c=a.map(c,a.proxy(function(a){return r.parseDate(a,this.o.format,this.o.language)},this));c=a.grep(c,a.proxy(function(a){return a<this.o.min||a>this.o.max||!a},this),!0);this.dates.replace(c);this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.min?this.viewDate=new Date(this.o.min):this.viewDate>this.o.max&&(this.viewDate=new Date(this.o.max));d?this.setValue():c.length&&String(b)!==String(this.dates)&&this._trigger("changeDate");!this.dates.length&&b.length&&this._trigger("clearDate");
this.fill()}},fillDow:function(){var a=this.o.weekStart,b="<tr>";this.o.calendarWeeks&&(b+='<th class="cw">&nbsp;</th>',this.picker.find(".datepicker-days thead tr:first-child").prepend('<th class="cw">&nbsp;</th>'));for(;a<this.o.weekStart+7;)b+='<th class="dow">'+p[this.o.language].daysMin[a++%7]+"</th>";b+="</tr>";this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+p[this.o.language].monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").html(a)},
setRange:function(b){b&&b.length?this.range=a.map(b,function(a){return a.valueOf()}):delete this.range;this.fill()},getClassNames:function(b){var c=[],d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),h=new Date;b.getUTCFullYear()<d||b.getUTCFullYear()===d&&b.getUTCMonth()<e?c.push("old"):(b.getUTCFullYear()>d||b.getUTCFullYear()===d&&b.getUTCMonth()>e)&&c.push("new");this.focusDate&&b.valueOf()===this.focusDate.valueOf()&&c.push("focused");this.o.todayHighlight&&b.getUTCFullYear()===
h.getFullYear()&&b.getUTCMonth()===h.getMonth()&&b.getUTCDate()===h.getDate()&&c.push("today");-1!==this.dates.contains(b)&&c.push("active");(b.valueOf()<this.o.min||b.valueOf()>this.o.max||-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekDisabled))&&c.push("disabled");this.range&&(b>this.range[0]&&b<this.range[this.range.length-1]&&c.push("range"),-1!==a.inArray(b.valueOf(),this.range)&&c.push("selected"));return c},fill:function(){var f=new Date(this.viewDate),d=f.getUTCFullYear(),e=d+p[this.o.language].year,
h=f.getUTCMonth(),f=-Infinity!==this.o.min?this.o.min.getUTCFullYear():-Infinity,g=-Infinity!==this.o.min?this.o.min.getUTCMonth():-Infinity,l=Infinity!==this.o.max?this.o.max.getUTCFullYear():Infinity,q=Infinity!==this.o.max?this.o.max.getUTCMonth():Infinity,k=p[this.o.language].today||"",m=p[this.o.language].clear||"",n;this.picker.find(".datepicker-days thead th.datepicker-switch").text(e+p[this.o.language].months[h]);this.picker.find("tfoot th.today").text(k).toggle(!1!==this.o.todayBtn);this.picker.find("tfoot th.clear").text(m).toggle(!1!==
this.o.clearBtn);this.updateNavArrows();this.fillMonths();h=c(d,h-1,28);e=r.getDaysInMonth(h.getUTCFullYear(),h.getUTCMonth());h.setUTCDate(e);h.setUTCDate(e-(h.getUTCDay()-this.o.weekStart+7)%7);k=new Date(h);k.setUTCDate(k.getUTCDate()+42);k=k.valueOf();for(e=[];h.valueOf()<k;){if(h.getUTCDay()===this.o.weekStart&&(e.push("<tr>"),this.o.calendarWeeks)){var m=new Date(+h+(this.o.weekStart-h.getUTCDay()-7)%7*864E5),m=new Date(Number(m)+(11-m.getUTCDay())%7*864E5),s=new Date(Number(s=c(m.getUTCFullYear(),
0,1))+(11-s.getUTCDay())%7*864E5);e.push('<td class="cw">'+((m-s)/864E5/7+1)+"</td>")}m=this.getClassNames(h);m.push("day");if(this.o.beforeShowDay!==a.noop){var t=this.o.beforeShowDay(this._utc_to_local(h));t===b?t={}:"boolean"===typeof t?t={enabled:t}:"string"===typeof t&&(t={classes:t});!1===t.enabled&&m.push("disabled");t.classes&&(m=m.concat(t.classes.split(/\s+/)));t.tooltip&&(n=t.tooltip)}m=a.unique(m);e.push('<td class="'+m.join(" ")+'"'+(n?' title="'+n+'"':"")+">"+h.getUTCDate()+"</td>");
h.getUTCDay()===this.o.weekEnd&&e.push("</tr>");h.setUTCDate(h.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(e.join(""));var z=this.picker.find(".datepicker-months").find("th:eq(1)").text(d).end().find("span").removeClass("active");a.each(this.dates,function(a,b){b.getUTCFullYear()===d&&z.eq(b.getUTCMonth()).addClass("active")});(d<f||d>l)&&z.addClass("disabled");d===f&&z.slice(0,g).addClass("disabled");d===l&&z.slice(q+1).addClass("disabled");e="";d=10*parseInt(d/10,10);
n=this.picker.find(".datepicker-years").find("th:eq(1)").text(d+"-"+(d+9)).end().find("td");d-=1;s=a.map(this.dates,function(a){return a.getUTCFullYear()});for(q=-1;11>q;q++)g=["year"],-1===q?g.push("old"):10===q&&g.push("new"),-1!==a.inArray(d,s)&&g.push("active"),(d<f||d>l)&&g.push("disabled"),e+='<span class="'+g.join(" ")+'">'+d+"</span>",d+=1;n.html(e)},updateNavArrows:function(){if(this._allow_update){var a=new Date(this.viewDate),b=a.getUTCFullYear(),a=a.getUTCMonth();switch(this.viewMode){case 0:-Infinity!==
this.o.min&&b<=this.o.min.getUTCFullYear()&&a<=this.o.min.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});Infinity!==this.o.max&&b>=this.o.max.getUTCFullYear()&&a>=this.o.max.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:-Infinity!==this.o.min&&b<=this.o.min.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),
Infinity!==this.o.max&&b>=this.o.max.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(b){b.preventDefault();b=a(b.target).closest("span, td, th");var d,e,h;if(1===b.length)switch(b[0].nodeName.toLowerCase()){case "th":switch(b[0].className){case "datepicker-switch":this.showMode(1);break;case "prev":case "next":b=r.modes[this.viewMode].navStep*("prev"===b[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=
this.moveMonth(this.viewDate,b);this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,b),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case "today":b=new Date;b=c(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0);this.showMode(-2);this._setDate(b,"linked"===this.o.todayBtn?null:"view");break;case "clear":this.isInput?d=this.element:this.component&&(d=this.element.find("input")),d&&d.val("").change(),this.update(),this._trigger("changeDate"),
this.o.autoclose&&this.hide()}break;case "span":b.is(".disabled")||(this.viewDate.setUTCDate(1),b.is(".month")?(h=1,e=b.parent().find("span").index(b),d=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(e),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(c(d,e,h))):(h=1,e=0,d=parseInt(b.text(),10)||0,this.viewDate.setUTCFullYear(d),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(c(d,e,h))),this.showMode(-1),this.fill());break;
case "td":b.is(".day")&&!b.is(".disabled")&&(h=parseInt(b.text(),10)||1,d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),b.is(".old")?0===e?(e=11,d-=1):e-=1:b.is(".new")&&(11===e?(e=0,d+=1):e+=1),this._setDate(c(d,e,h)))}this.picker.is(":visible")&&this._focused_from&&a(this._focused_from).focus();delete this._focused_from},_toggle_multidate:function(a){var b=this.dates.contains(a);a?-1!==b?this.dates.remove(b):this.dates.push(a):this.dates.clear();if("number"===typeof this.o.multidate)for(;this.dates.length>
this.o.multidate;)this.dates.remove(0)},_setDate:function(a,b){b&&"date"!==b||this._toggle_multidate(a&&new Date(a));b&&"view"!==b||(this.viewDate=a&&new Date(a));this.fill();this.setValue();this._trigger("changeDate");var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input"));c&&c.change();!this.o.autoclose||b&&"date"!==b||this.hide()},moveMonth:function(a,c){if(!a)return b;if(!c)return a;var d=new Date(a.valueOf()),e=d.getUTCDate(),h=d.getUTCMonth(),g=Math.abs(c),l;c=0<c?1:
-1;if(1===g){if(g=-1===c?function(){return d.getUTCMonth()===h}:function(){return d.getUTCMonth()!==l},l=h+c,d.setUTCMonth(l),0>l||11<l)l=(l+12)%12}else{for(var m=0;m<g;m++)d=this.moveMonth(d,c);l=d.getUTCMonth();d.setUTCDate(e);g=function(){return l!==d.getUTCMonth()}}for(;g();)d.setUTCDate(--e),d.setUTCMonth(l);return d},moveYear:function(a,b){return this.moveMonth(a,12*b)},dateWithinRange:function(a){return a>=this.o.min&&a<=this.o.max},keydown:function(a){if(this.picker.is(":not(:visible)"))27===
a.keyCode&&this.show();else{var b=!1,c,d,h,g=this.focusDate||this.viewDate;switch(a.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide();a.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;c=37===a.keyCode?-1:1;a.ctrlKey?(d=this.moveYear(this.dates.get(-1)||e(),c),h=this.moveYear(g,c),this._trigger("changeYear",this.viewDate)):a.shiftKey?(d=this.moveMonth(this.dates.get(-1)||e(),c),h=this.moveMonth(g,
c),this._trigger("changeMonth",this.viewDate)):(d=new Date(this.dates.get(-1)||e()),d.setUTCDate(d.getUTCDate()+c),h=new Date(g),h.setUTCDate(g.getUTCDate()+c));this.dateWithinRange(d)&&(this.focusDate=this.viewDate=h,this.setValue(),this.fill(),a.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;c=38===a.keyCode?-1:1;a.ctrlKey?(d=this.moveYear(this.dates.get(-1)||e(),c),h=this.moveYear(g,c),this._trigger("changeYear",this.viewDate)):a.shiftKey?(d=this.moveMonth(this.dates.get(-1)||
e(),c),h=this.moveMonth(g,c),this._trigger("changeMonth",this.viewDate)):(d=new Date(this.dates.get(-1)||e()),d.setUTCDate(d.getUTCDate()+7*c),h=new Date(g),h.setUTCDate(g.getUTCDate()+7*c));this.dateWithinRange(d)&&(this.focusDate=this.viewDate=h,this.setValue(),this.fill(),a.preventDefault());break;case 13:g=this.focusDate||this.dates.get(-1)||this.viewDate;this._toggle_multidate(g);b=!0;this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();this.picker.is(":visible")&&
(a.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(b){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var l;this.isInput?l=this.element:this.component&&(l=this.element.find("input"));l&&l.change()}}},showMode:function(a){a&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+a)));this.picker.find(">div").hide().filter(".datepicker-"+r.modes[this.viewMode].clsName).css("display",
"block");this.updateNavArrows()}};var q=function(b,c){this.element=a(b);this.inputs=a.map(c.inputs,function(a){return a.jquery?a[0]:a});delete c.inputs;a(this.inputs).datepicker(c).bind("changeDate",a.proxy(this.dateUpdated,this));this.pickers=a.map(this.inputs,function(b){return a(b).data("datepicker")});this.updateDates()};q.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(a){return a.getUTCDate()});this.updateRanges()},updateRanges:function(){var b=a.map(this.dates,function(a){return a.valueOf()});
a.each(this.pickers,function(a,c){c.setRange(b)})},dateUpdated:function(b){if(!this.updating){this.updating=!0;var c=a(b.target).data("datepicker").getUTCDate();b=a.inArray(b.target,this.inputs);var d=this.inputs.length;if(-1!==b){a.each(this.pickers,function(a,b){b.getUTCDate()||b.setUTCDate(c)});if(c<this.dates[b])for(;0<=b&&c<this.dates[b];)this.pickers[b--].setUTCDate(c);else if(c>this.dates[b])for(;b<d&&c>this.dates[b];)this.pickers[b++].setUTCDate(c);this.updateDates();delete this.updating}}},
remove:function(){a.map(this.pickers,function(a){a.remove()});delete this.element.data().datepicker}};var s=a.fn.datepicker;a.fn.datepicker=function(c){var e=Array.apply(null,arguments);e.shift();var h;this.each(function(){var g=a(this),l=g.data("datepicker"),p;options="object"===typeof c&&c;g.is("[type=date]")?p=g:g.find("[type=date]").length&&(p=g.find("[type=date]"));p.length&&(p.attr("min")&&g.attr("data-date-min",p.attr("min")),p.attr("max")&&g.attr("data-date-max",p.attr("max")));l||(l=k(this,
"date"),p=a.extend({},n,l,options),p=d(p.language),l=a.extend({},n,p,l,options),g.is(".input-daterange")||l.inputs?(p={inputs:l.inputs||g.find("input").toArray()},g.data("datepicker",l=new q(this,a.extend(l,p)))):g.data("datepicker",l=new m(this,l)));if("string"===typeof c&&"function"===typeof l[c]&&(h=l[c].apply(l,e),h!==b))return!1});return h!==b?h:this};var n=a.fn.datepicker.defaults={autoclose:!0,beforeShowDay:a.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],forceParse:!0,format:"yyyy-mm-dd",
keyboardNavigation:!0,language:"zh-CN",max:Infinity,min:-Infinity,minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startView:0,todayBtn:!1,todayHighlight:!0,weekStart:0},u=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=m;var p=a.fn.datepicker.dates={"zh-CN":{year:"年",months:"一月 二月 三月 四月 五月 六月 七月 八月 九月 十月 十一月 十二月".split(" "),monthsShort:"一月 二月 三月 四月 五月 六月 七月 八月 九月 十月 十一月 十二月".split(" "),days:"星期日 星期一 星期二 星期三 星期四 星期五 星期六 星期日".split(" "),
daysShort:"周日 周一 周二 周三 周四 周五 周六 周日".split(" "),daysMin:"日一二三四五六日".split(""),today:"今日",clear:"清除",format:"yyyy-mm-dd",weekStart:1}},r={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return 0===a%4&&0!==a%100||0===a%400},getDaysInMonth:function(a,b){return[31,r.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,
parseFormat:function(a){var b=a.replace(this.validParts,"\x00").split("\x00");a=a.match(this.validParts);if(!b||!b.length||!a||0===a.length)throw Error("Invalid date format.");return{separators:b,parts:a}},parseDate:function(d,e,h){function g(){var a=this.slice(0,q[n].length),b=q[n].slice(0,a.length);return a===b}if(!d)return b;if(d instanceof Date)return d;"string"===typeof e&&(e=r.parseFormat(e));var l=/([\-+]\d+)([dmwy])/,q=d.match(/([\-+]\d+)([dmwy])/g),k,n;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(d)){d=
new Date;for(n=0;n<q.length;n++)switch(e=l.exec(q[n]),k=parseInt(e[1]),e[2]){case "d":d.setUTCDate(d.getUTCDate()+k);break;case "m":d=m.prototype.moveMonth.call(m.prototype,d,k);break;case "w":d.setUTCDate(d.getUTCDate()+7*k);break;case "y":d=m.prototype.moveYear.call(m.prototype,d,k)}return c(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),0,0,0)}q=d&&d.match(this.nonpunctuation)||[];d=new Date;var l={},s="yyyy yy M MM m mm d dd".split(" ");k={yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,
b){return a.setUTCFullYear(2E3+b)},m:function(a,b){if(isNaN(a))return a;for(b-=1;0>b;)b+=12;b%=12;for(a.setUTCMonth(b);a.getUTCMonth()!==b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};var u;k.M=k.MM=k.mm=k.m;k.dd=k.d;d=c(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0);var x=e.parts.slice();q.length!==x.length&&(x=a(x).filter(function(b,c){return-1!==a.inArray(c,s)}).toArray());if(q.length===x.length){var t;n=0;for(t=x.length;n<t;n++){u=parseInt(q[n],10);e=x[n];
if(isNaN(u))switch(e){case "MM":u=a(p[h].months).filter(g);u=a.inArray(u[0],p[h].months)+1;break;case "M":u=a(p[h].monthsShort).filter(g),u=a.inArray(u[0],p[h].monthsShort)+1}l[e]=u}for(n=0;n<s.length;n++)e=s[n],e in l&&!isNaN(l[e])&&(h=new Date(d),k[e](h,l[e]),isNaN(h)||(d=h))}return d},formatDate:function(b,c,d){if(!b)return"";"string"===typeof c&&(c=r.parseFormat(c));d={d:b.getUTCDate(),D:p[d].daysShort[b.getUTCDay()],DD:p[d].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:p[d].monthsShort[b.getUTCMonth()],
MM:p[d].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};d.dd=(10>d.d?"0":"")+d.d;d.mm=(10>d.m?"0":"")+d.m;b=[];for(var e=a.extend([],c.separators),h=0,g=c.parts.length;h<=g;h++)e.length&&b.push(e.shift()),b.push(d[c.parts[h]]);return b.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};
r.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+r.headTemplate+"<tbody></tbody>"+r.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+"</table></div></div>";a.fn.datepicker.DPGlobal=r;a.fn.datepicker.noConflict=function(){a.fn.datepicker=s;return this};
a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-toggle="datepicker"]',function(b){var c=a(this);c.data("datepicker")||(b.preventDefault(),c.datepicker("show"))});a(function(){a('[data-toggle="datepicker-inline"]').datepicker()})})(window.jQuery);(function(a){for(var b,c=document.getElementsByTagName("head")[0].style,e=["transformProperty","WebkitTransform","OTransform","msTransform","MozTransform"],g=0;g<e.length;g++)void 0!==c[e[g]]&&(b=e[g]);var k=eval('"v"=="\x0B"');jQuery.fn.extend({rotate:function(b){if(0!==this.length&&"undefined"!=typeof b){"number"==typeof b&&(b={angle:b});for(var c=[],e=0,g=this.length;e<g;e++){var k=this.get(e);if(k.Wilq32&&k.Wilq32.PhotoEffect)k.Wilq32.PhotoEffect._handleRotation(b);else{var s=a.extend(!0,{},b),
k=(new Wilq32.PhotoEffect(k,s))._rootObj;c.push(a(k))}}return c}},getRotateAngle:function(){for(var a=[],b=0,c=this.length;b<c;b++){var e=this.get(b);e.Wilq32&&e.Wilq32.PhotoEffect&&(a[b]=e.Wilq32.PhotoEffect._angle)}return a},stopRotate:function(){for(var a=0,b=this.length;a<b;a++){var c=this.get(a);c.Wilq32&&c.Wilq32.PhotoEffect&&clearTimeout(c.Wilq32.PhotoEffect._timer)}}});Wilq32=window.Wilq32||{};Wilq32.PhotoEffect=function(){return b?function(a,b){a.Wilq32={PhotoEffect:this};this._img=this._rootObj=
this._eventObj=a;this._handleRotation(b)}:function(a,b){this._img=a;this._rootObj=document.createElement("span");this._rootObj.style.display="inline-block";this._rootObj.Wilq32={PhotoEffect:this};a.parentNode.insertBefore(this._rootObj,a);if(a.complete)this._Loader(b);else{var c=this;jQuery(this._img).bind("load",function(){c._Loader(b)})}}}();Wilq32.PhotoEffect.prototype={_setupParameters:function(a){this._parameters=this._parameters||{};"number"!==typeof this._angle&&(this._angle=0);"number"===
typeof a.angle&&(this._angle=a.angle);this._parameters.animateTo="number"===typeof a.animateTo?a.animateTo:this._angle;this._parameters.step=a.step||this._parameters.step||null;this._parameters.easing=a.easing||this._parameters.easing||function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c};this._parameters.duration=a.duration||this._parameters.duration||1E3;this._parameters.callback=a.callback||this._parameters.callback||function(){};a.bind&&a.bind!=this._parameters.bind&&this._BindEvents(a.bind)},_handleRotation:function(a){this._setupParameters(a);
this._angle==this._parameters.animateTo?this._rotate(this._angle):this._animateStart()},_BindEvents:function(a){if(a&&this._eventObj){if(this._parameters.bind){var b=this._parameters.bind,c;for(c in b)b.hasOwnProperty(c)&&jQuery(this._eventObj).unbind(c,b[c])}this._parameters.bind=a;for(c in a)a.hasOwnProperty(c)&&jQuery(this._eventObj).bind(c,a[c])}},_Loader:function(){return k?function(a){var b=this._img.width,c=this._img.height;this._img.parentNode.removeChild(this._img);this._vimage=this.createVMLNode("image");
this._vimage.src=this._img.src;this._vimage.style.height=c+"px";this._vimage.style.width=b+"px";this._vimage.style.position="absolute";this._vimage.style.top="0px";this._vimage.style.left="0px";this._container=this.createVMLNode("group");this._container.style.width=b;this._container.style.height=c;this._container.style.position="absolute";this._container.setAttribute("coordsize",b-1+","+(c-1));this._container.appendChild(this._vimage);this._rootObj.appendChild(this._container);this._rootObj.style.position=
"relative";this._rootObj.style.width=b+"px";this._rootObj.style.height=c+"px";this._rootObj.setAttribute("id",this._img.getAttribute("id"));this._rootObj.className=this._img.className;this._eventObj=this._rootObj;this._handleRotation(a)}:function(a){this._rootObj.setAttribute("id",this._img.getAttribute("id"));this._rootObj.className=this._img.className;this._width=this._img.width;this._height=this._img.height;this._widthHalf=this._width/2;this._heightHalf=this._height/2;var b=Math.sqrt(this._height*
this._height+this._width*this._width);this._widthAdd=b-this._width;this._heightAdd=b-this._height;this._widthAddHalf=this._widthAdd/2;this._heightAddHalf=this._heightAdd/2;this._img.parentNode.removeChild(this._img);this._aspectW=(parseInt(this._img.style.width,10)||this._width)/this._img.width;this._aspectH=(parseInt(this._img.style.height,10)||this._height)/this._img.height;this._canvas=document.createElement("canvas");this._canvas.setAttribute("width",this._width);this._canvas.style.position="relative";
this._canvas.style.left=-this._widthAddHalf+"px";this._canvas.style.top=-this._heightAddHalf+"px";this._canvas.Wilq32=this._rootObj.Wilq32;this._rootObj.appendChild(this._canvas);this._rootObj.style.width=this._width+"px";this._rootObj.style.height=this._height+"px";this._eventObj=this._canvas;this._cnv=this._canvas.getContext("2d");this._handleRotation(a)}}(),_animateStart:function(){this._timer&&clearTimeout(this._timer);this._animateStartTime=+new Date;this._animateStartAngle=this._angle;this._animate()},
_animate:function(){var a=+new Date,b=a-this._animateStartTime>this._parameters.duration;if(b&&!this._parameters.animatedGif)clearTimeout(this._timer);else{if(this._canvas||this._vimage||this._img)a=this._parameters.easing(0,a-this._animateStartTime,this._animateStartAngle,this._parameters.animateTo-this._animateStartAngle,this._parameters.duration),this._rotate(~~(10*a)/10);this._parameters.step&&this._parameters.step(this._angle);var c=this;this._timer=setTimeout(function(){c._animate.call(c)},
10)}this._parameters.callback&&b&&(this._angle=this._parameters.animateTo,this._rotate(this._angle),this._parameters.callback.call(this._rootObj))},_rotate:function(){var a=Math.PI/180;return k?function(a){this._angle=a;this._container.style.rotation=a%360+"deg"}:b?function(a){this._angle=a;this._img.style[b]="rotate("+a%360+"deg)"}:function(b){this._angle=b;b=b%360*a;this._canvas.width=this._width+this._widthAdd;this._canvas.height=this._height+this._heightAdd;this._cnv.translate(this._widthAddHalf,
this._heightAddHalf);this._cnv.translate(this._widthHalf,this._heightHalf);this._cnv.rotate(b);this._cnv.translate(-this._widthHalf,-this._heightHalf);this._cnv.scale(this._aspectW,this._aspectH);this._cnv.drawImage(this._img,0,0)}}()};k&&(Wilq32.PhotoEffect.prototype.createVMLNode=function(){document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{return!document.namespaces.rvml&&document.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<rvml:"+
a+' class="rvml">')}}catch(a){return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}}())})(jQuery);var turnplate={restaraunts:[],colors:[],outsideRadius:175,textRadius:135,insideRadius:55,startAngle:0,bRotate:!1};
function readyTurnplate(a,b,c,e,g,k,d,h){turnplate.restaraunts=a;turnplate.colors=b;var l=function(a,b,c,d,e){a=360/turnplate.restaraunts.length*a-360/(2*turnplate.restaraunts.length);a=270>a?270-a:360-a+270;$("#wheelcanvas").stopRotate();$("#wheelcanvas").rotate({angle:0,animateTo:a+1800,duration:8E3,callback:function(){var a=b.substring(b.indexOf("-")+1,b.indexOf("+"));b="恭喜你，获得"+b.substr(b.indexOf("+")+1);"none"==a?Message.error("很遗憾，未中奖！"):("hongbao"==a&&(b=null!=e.hongbaotype&&"stochastic"==
e.hongbaotype?"恭喜你，获得随机红包"+e.hongbaomoney+"元":"恭喜你，获得红包"+e.hongbaomoney+"元"),Message.success(b));turnplate.bRotate=!turnplate.bRotate}})};$(".pointer").click(function(){var a=Number($.trim($(".prize-result").find(".lotter-limit").text()));turnplate.bRotate||(turnplate.bRotate=!turnplate.bRotate,e.lottery_joint_limit=a,$.post(c,e,function(a){a.error&&(Message.error(a.message),turnplate.bRotate=!turnplate.bRotate,a.redirect&&setTimeout(function(){window.location.href=a.redirect},1500));if(a.success){var b=
a.redirect,c=a.message.id;g.text(a.message.lottery_joint_limit);for(var d=0,e=0;e<turnplate.restaraunts.length;e++)if(0==turnplate.restaraunts[e].indexOf(c+"-")){d=e;break}c=$(this).parent().find("label");l(d+1,turnplate.restaraunts[d],b,c,a.message)}}))})}function rnd(a,b){return Math.floor(Math.random()*(b-a+1)+a)}
function drawRouletteWheel(){var a=document.getElementById("wheelcanvas");if(a.getContext){var b=Math.PI/(turnplate.restaraunts.length/2),c=a.getContext("2d");c.clearRect(0,0,422,422);c.strokeStyle="#FFBE04";c.font="16px Microsoft YaHei";for(a=0;a<turnplate.restaraunts.length;a++){var e=turnplate.startAngle+a*b;c.fillStyle=turnplate.colors[a];c.beginPath();c.arc(211,211,turnplate.outsideRadius,e,e+b,!1);c.arc(211,211,turnplate.insideRadius,e+b,e,!0);c.stroke();c.fill();c.save();c.fillStyle="#E5302F";
var g=turnplate.restaraunts[a].substring(0,turnplate.restaraunts[a].indexOf("-")),k=turnplate.restaraunts[a].substring(turnplate.restaraunts[a].indexOf("-")+1,turnplate.restaraunts[a].indexOf("+")),d=turnplate.restaraunts[a].substr(turnplate.restaraunts[a].indexOf("+")+1);c.translate(211+Math.cos(e+b/2)*turnplate.textRadius,211+Math.sin(e+b/2)*turnplate.textRadius);c.rotate(e+b/2+Math.PI/2);if(0<d.indexOf("M"))for(e=d.split("M"),d=0;d<e.length;d++)c.font=0==d?"bold 16px Microsoft YaHei":"14px Microsoft YaHei",
0==d?c.fillText(e[d]+"M",-c.measureText(e[d]+"M").width/2,17*d):c.fillText(e[d],-c.measureText(e[d]).width/2,17*d);else if(-1==d.indexOf("M")&&6<d.length)for(d=d.substring(0,6)+"||"+d.substring(6),e=d.split("||"),d=0;d<e.length;d++)c.fillText(e[d],-c.measureText(e[d]).width/2,17*d);else c.fillText(d,-c.measureText(d).width/2,0);if("point"==k){var h=document.getElementById("point_"+g);null!=h&&(h.onload=function(){c.drawImage(h,-20,10,40,40)},c.drawImage(h,-20,10,40,40))}else"none"==k?(h=document.getElementById("none_"+
g),null!=h&&(h.onload=function(){c.drawImage(h,-20,10,40,40)},c.drawImage(h,-20,10,40,40))):"hongbao"==k?(h=document.getElementById("hongbao_"+g),null!=h&&(h.onload=function(){c.drawImage(h,-20,10,40,40)},c.drawImage(h,-20,10,40,40))):"custom"==k&&(h=document.getElementById("custom_"+g),null!=h&&(h.onload=function(){c.drawImage(h,-20,10,40,40)},c.drawImage(h,-20,10,40,40)));c.restore()}}};