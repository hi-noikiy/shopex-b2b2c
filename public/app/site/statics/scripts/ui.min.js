document.head||(document.head=document.getElementsByTagName("head")[0]);function isElement(a){a instanceof jQuery&&(a=a[0]);return a?a.nodeName&&1===a.nodeType:!1}function substitute(a,b){return String(a).replace(/\\?\{([^{}]+)\}/g,function(a,f){return"\\"===a.charAt(0)?a.slice(1):null!=b[f]?b[f]:""})}function evalScripts(a,b,c){if(a){var f="",h=a.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(a,b){f+=b+"\n";return""});$(b).html(c?h:a);c&&$.globalEval(f);return h}}
function maxZindex(a,b){a=$(a||"div");var c=0;if(a.length){var f=a.filter(function(a){if(isElement(a)&&!(-1<["script","link","base","style"].indexOf(a.tagName.toLowerCase())))return-1<["absolute","relative","fixed"].indexOf($(a).css("position"))});if(f.length)for(var h=0,e=f.length;h<e;h++)var d=f[h].css("z-index"),c=Math.max(c,isNaN(d)?0:d)}b&&(c+=parseInt(b));return Math.min(c,2147483647)}
function dataOptions(a,b){if(!b)throw Error("dataOptions：请传入prefix参数");var c=$(a).data(),f={},h,e=RegExp("^"+b.toLowerCase()+"([A-Z])");b=RegExp("^"+b.toLowerCase());for(var d in c)b.test(d)&&(h=d.replace(e,function(a,b){return b.toLowerCase()}),f[h]=c[d]);return f}
function countdown(a,b){function c(a,b,f){var d="",e=!1,q=0,r=0,s=0,n=0,q=Math.round(+new Date/1E3),n=b-q;if(!(0>n))return 0==n&&f&&f(),h||(0<Math.floor(n/86400)&&(q=Math.floor(n/86400),n%=86400,d+=q+"天",e=!0),0<Math.floor(n/3600)&&(r=Math.floor(n/3600),n%=3600,e=!0)),e&&(d+=" "+r+"时",e=!0),!h&&0<Math.floor(n/60)&&(s=Math.floor(n/60),n%=60,e=!0),e&&(d+=" "+s+"分",e=!0),0<Math.floor(n)&&(e=!0),e&&(d+=" "+n+"秒",e=!0),$(a).html(d),setTimeout(function(){c(a,b,f)},1E3)}var f=this;b=$.extend({start:60,secondOnly:!1,
callback:null},b||{});var h=b.secondOnly,e=b.callback,d=Math.round((+new Date+1E3*b.start)/1E3);this.timer=c(a,d,e);this.stop=function(){clearTimeout(f.timer)}}$.fn.outerHtml=function(){if("outerHTML"in document.body){var a="";this.each(function(b,c){a+=c.outerHTML});return a}return $("<div>").append(this.clone(!0,!0)).html()};
$.fn.patch=function(a){var b=this,c;c=a?$.makeArray(a):["margin","padding","border"];var f={x:0,y:0};$.each({x:["left","right"],y:["top","bottom"]},function(a,e){$.each(e,function(d,g){try{$.each(c,function(c,d){d+="-"+g;0==d.indexOf("border")&&(d+="-width");f[a]+=parseInt(b.css(d))||0})}catch(e){}})});return f};
$.fn.locate=function(a){a=$.extend({relative:document.body,x:"center",y:"center",pos:"absolute"},a);var b,c,f=a.offset;c=$(a.relative);var h=$(this).css("position",a.pos),e=h.height(),d=h.width(),g=(c.is("body")?$(window):c).innerHeight(),k=c.innerWidth();if("absolute"===a.pos){switch(a.x){case 0:case "left":b=0;break;case "right":b=k-d;break;default:b=parseInt((k-d)/2)}switch(a.y){case 0:case "top":a=0;break;case "bottom":a=g-e;break;default:a=parseInt((g-e)/2)}b=Math.max(0,Math.floor(b+(c.offset()?
c.offset().left:0)+c.scrollLeft()));c=Math.max(0,Math.floor(a+(c.offset()?c.offset().top:0)+c.scrollTop()));"string"===typeof f?"top"==f?c-=e:"left"==f?b-=d:"bottom"==f?c+=g:"right"==f&&(b+=k):$.isPlainObject(f)&&(b+=f.x||0,c+=f.y||0);h.css({left:b,top:c})}else"fixed"===a.pos&&h.css({left:"50%",top:"50%",marginLeft:-d/2,marginTop:-e/2});return this};Array.prototype.some||(Array.prototype.some=function(a,b){for(var c=0,f=this.length>>>0;c<f;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1});
Array.prototype.every||(Array.prototype.every=function(a,b){for(var c=0,f=this.length>>>0;c<f;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0});Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c=this.length>>>0;b=+b||0;Infinity===Math.abs(b)&&(b=0);0>b&&(b+=c,0>b&&(b=0));for(;b<c;b++)if(this[b]===a)return b;return-1});$.fn.some=function(a,b){return Array.prototype.slice.call(this).some(a,b)};
$.fn.every=function(a,b){return Array.prototype.slice.call(this).every(a,b)};
var Class=function(a,b){"function"===typeof a&&(a={init:a});var c=function(){"function"===typeof this.init&&this.init.apply(this,arguments)};c.prototype=a||{};c.prototype.setOptions=function(){this.options=$.extend.apply(null,[!0,{},this.options].concat($.makeArray(arguments)));return this};c.prototype.trigger=function(a,b){a=this.options[a]||this.options["on"+a.replace(/^[a-z]/g,function(a){return a.toUpperCase()})];"function"===typeof a&&a.apply(this,$.makeArray(b));return this};if("object"===typeof b)for(var f in b)b.hasOwnProperty(f)&&
(c[f]=b[f]);return c};(function(){var a,b,c=window.console;window.log=a=function(){b.push(arguments);c?c.log[c.firebug?"apply":"call"](c,Array.prototype.slice.call(arguments)):alert(Array.prototype.slice.call(arguments).join("\n"))};a.history=b=[]})();(function(a){function b(b,c){this.$container=a(b);this.config=a.extend({},a.fn.switchable.defaults,c||{});this._init()}a.extend({Switchable:b});SP=b.prototype;b.Plugins=[];a.extend(SP,{_init:function(){var f=this,c=this.config;this.activeIndex=c.activeIndex;this.$evtBDObject=a("<div />");this._parseStructure();c.hasTriggers&&this._bindTriggers();c.hasFlips&&this._bindFlips();a.each(b.Plugins,function(){this._init(f)})},_parseStructure:function(){var a=this.$container,b=this.config;switch(b.type){case 0:this.$triggers=
a.find("."+b.navCls).children();this.$panels=a.find("."+b.contentCls).children();break;case 1:this.$triggers=a.find("."+b.triggerCls),this.$panels=a.find("."+b.panelCls)}this.viewLength=this.$panels.length/b.step},_bindTriggers:function(){var b=this,c=this.config,e=this.$triggers,d=c.events;a.isArray(d)||(d=d.split(","));e.each(function(g,e){-1!==a.inArray("click",d)&&a(e).click(function(a){a.preventDefault();if(b.activeIndex===g)return b;b.switchTimer&&clearTimeout(b.switchTimer);b.switchTimer=setTimeout(function(){b.switchTo(g)},
1E3*c.delay);a.stopPropagation()});-1!==a.inArray("hover",d)&&a(e).hover(function(a){if(b.activeIndex===g)return b;b.switchTimer&&clearTimeout(b.switchTimer);b.switchTimer=setTimeout(function(){b.switchTo(g)},1E3*c.delay)},function(a){b.switchTimer&&clearTimeout(b.switchTimer);a.stopPropagation()})})},_bindFlips:function(){var a=this,b=this.config,c=this.$container.find(b.backward),b=this.$container.find(b.forward);c.click(function(b){b.preventDefault();a.backward()});b.click(function(b){b.preventDefault();
a.forward()})},beforeSwitch:function(b){b=b||this.config.onBeforeSwitch;if(a.isFunction(b))this.$container.on("beforeSwitch.switchable",b)},afterSwitch:function(b){b=b||this.config.onAfterSwitch;if(a.isFunction(b))this.$container.on("afterSwitch.switchable",b)},switchTo:function(b){var c=this.config,e=a.makeArray(this.$triggers),d=a.makeArray(this.$panels),g=this.activeIndex,k=c.step,m=g*k,p=b*k;this.beforeSwitch();var l=a.Event("beforeSwitch.switchable");this.$container.trigger(l,[b]);c.hasTriggers&&
this._switchTrigger(-1<g?e[g]:null,e[b]);this._switchView(d.slice(m,m+k),d.slice(p,p+k),b);this.activeIndex=b;this.afterSwitch();l=a.Event("afterSwitch.switchable");this.$container.trigger(l,[b])},backward:function(){var a=this.activeIndex;this.switchTo(0<a?a-1:this.viewLength-1)},forward:function(){var a=this.activeIndex;this.switchTo(a<this.viewLength-1?a+1:0)},_switchTrigger:function(b,c){var e=this.config.activeCls;b&&a(b).removeClass(e);a(c).addClass(e)},_switchView:function(b,c,e){a.each(b,
function(){a(this).hide()});a.each(c,function(){a(this).show()})}});a.fn.switchable=function(c){var h=this,e=h.data("switchables");h.data("switchables",e?e:[]);return h.each(function(){h.data("switchables").push(new b(a(this),c))})};a.fn.switchable.defaults={type:0,navCls:"switchable-nav",contentCls:"switchable-content",triggerCls:"switchable-trigger",panelCls:"switchable-panel",hasTriggers:!0,activeIndex:0,activeCls:"active",events:["click","hover"],hasFlips:!1,backward:".prev",forward:".next",step:1,
delay:0.1,viewSize:[]};a.extend(a.fn.switchable.defaults,{autoplay:!1,interval:3,pauseOnHover:!0});b.Plugins.push({name:"autoplay",_init:function(a){var b=a.config;b.autoplay&&(b.pauseOnHover&&a.$container.hover(function(b){a.paused=!0},function(c){c.currentTarget!==c.target&&0===a.$container.has(c.target).length||setTimeout(function(){a.paused=!1},1E3*b.interval)}),a.autoplayTimer=setInterval(function(){a.paused||a.switchTo(a.activeIndex<a.viewLength-1?a.activeIndex+1:0)},1E3*b.interval,!0))}});
var c;a.extend(a.fn.switchable.defaults,{effect:"none",duration:0.5,easing:"linear",circle:!1});b.Effects={none:function(b,c,e){a.each(b,function(){a(this).hide()});a.each(c,function(){a(this).show()});e()},fade:function(b,c,e){if(1===b.length){var d=this,g=d.config,k=b[0],m=c[0];d.$anim&&d.$anim.clearQueue();1!=d.viewLength&&(a(m).css("opacity",1),d.$anim=a(k).animate({opacity:0,duration:g.duration,easing:g.easing},function(){d.$anim=null;a(m).css("z-index",9);a(k).css("z-index",1);e()}))}},scroll:function(b,
c,e,d){var g=this;b=g.config;var k="scrollx"===b.effect,m=g.viewSize[k?0:1]*d,p={},l,q;b.circle&&0==d&&g.activeIndex==g.viewLength-1&&(l=a(c),g.$container.data("switchables-circle_appended")||(l.parent().append(l.clone()),g.$container.data("switchables-circle_appended",!0),k&&l.parent().css("width",g.viewSize[0]*(g.viewLength+1)+"px")),q=m,m=g.viewSize[k?0:1]*g.viewLength);p[k?"left":"top"]=-m;a.extend(p,{duration:b.duration,easing:b.easing});g.$anim&&g.$anim.clearQueue();g.$anim=g.$panels.parent().animate(p,
function(){l&&(l.parent().css(k?"left":"top",q),l=null);g.$anim=null;e()})}};c=b.Effects;c.scrollx=c.scrolly=c.scroll;b.Plugins.push({name:"effect",_init:function(b){var c=b.config,e=c.effect,d=b.$panels,g=c.step,k=b.activeIndex,m=k*g,p=m+g-1;b.viewSize=[c.viewSize[0]||d.outerWidth()*g,c.viewSize[1]||d.outerHeight()*g];if("none"!==e)switch(d.css("display","block"),e){case "scrollx":case "scrolly":d.parent().css("position","absolute");d.parent().parent().css("position","relative");"scrollx"===e&&(d.css("float",
"left"),d.parent().css("width",b.viewSize[0]*b.viewLength+"px"));break;case "fade":d.each(function(b){a(this).css({opacity:b>=m&&b<=p?1:0,position:"absolute",zIndex:b>=m&&b<=p?9:1})})}else d.eq(k).siblings(d).css("display","none")}});a.extend(SP,{_switchView:function(b,h,e){var d=this.config.effect;(a.isFunction(d)?d:c[d]).call(this,b,h,function(){},e)}});a.extend(a.fn.switchable.defaults,{lazyload:!1,lazyDataType:"data-src"});b.Plugins.push({name:"lazyload",_init:function(b){function c(m,p){var l=
d.step,q=p*l;a.loadCustomLazyData(g.slice(q,q+l),k);e()&&(b.afterSwitch(),m=a.Event("afterSwitch.switchable"),b.$container.trigger(m).off("beforeSwitch.switchable",c))}function e(){var a,c=!0;"data-src"===k&&(a="IMG"==g[0].nodeName?b.$panels:b.$panels.find("img"),a.each(function(){if(this.getAttribute(k))return c=!1}));return c}var d=b.config;if(d.lazyload){var g=a.makeArray(b.$panels),k=d.lazyDataType;b.beforeSwitch(c);b.$container.trigger("beforeSwitch.switchable")}}});a.extend({loadCustomLazyData:function(b,
c,e){var d,g;a.each(b,function(){switch(c){case "action-lazyload":g="TEXTAREA"===this.nodeName&&a(this).hasClass("action-lazyload")?a(this):a(this).find("textarea.action-lazyload");var b=a("<div/>").insertAfter(g);g&&g.val()&&(evalScripts(g.val(),b,e),g.remove());break;default:(d="IMG"===this.nodeName&&a(this).attr("data-src")?a(this):a(this).find("img[data-src]"))&&d.each(function(){var a=this.getAttribute(c);a&&this.src!=a&&(this.src=a,this.removeAttribute(c))})}})}});b.autoRender=function(b,c){var e=
this;b=b||"[data-toggle=switchable]";var d=a(c||document.body).find(b);a.loadCustomLazyData(a(c||document.body),"action-lazyload");d.each(function(){try{var b=a(this).data("switchableConfig"),c=dataOptions(this,"switchable");"string"===typeof b&&(b=JSON.parse(b));a(this).removeData("switchableConfig");a.extend(!0,b,c||{});new e(a(this),b)}catch(d){}})}})(jQuery);jQuery(function(a){a.Switchable.autoRender()});var Dialog=new Class({options:{title:"提示",minHeight:50,minWidth:80,locate:{target:document.body,x:"center",y:"center",pos:"absolute"},frameTpl:'<iframe allowtransparency="allowtransparency" align="middle" frameborder="0" height="100%" width="100%" scrolling="auto" src="about:blank">请使用支持iframe框架的浏览器。</iframe>',ajaxTpl:'<div class="loading">loading...</div>',asyncOptions:{type:"get"},component:{container:"dialog",body:"dialog-body",header:"dialog-header",close:"dialog-btn-close",content:"dialog-content"}},
init:function(a,b){if(a){this.doc=$(document.body);this.setOptions(b);b=this.options;var c=b.asyncOptions||{},f=this.container=this.build(a);this.body=f.find("."+b.component.body);this.header=f.find("."+b.component.header);this.title=this.header.find("h2");this.close=f.find("."+b.component.close);this.content=f.find("."+b.component.content);b.width&&!isNaN(b.width)&&(b.width=1>=b.width&&0<b.width?b.width*$(window).innerWidth():parseInt(b.width));b.height&&!isNaN(b.height)&&(b.height=1>=b.height&&
0<b.height?b.height*$(window).innerHeight():parseInt(b.height));this.size={x:b.width-this.body.patch().x-this.container.patch().x||"",y:b.height-this.body.patch().y-this.container.patch().x||""};b.title||this.header.find("h2")[0]&&this.header.find("h2").remove();f.data("instance")||this.body.css({width:this.size.x,height:this.size.y});this.trigger("load",this);"string"===$.type(a)&&("ajax"===b.async||!0===b.async?$.ajax($.extend({url:a+"",complete:$.proxy(function(a){this.content.html(a.responseText);
this.locate();c.callback.call(this,a)},this)},c)):"iframe"===b.async&&(f=c.data?a+(1<a.indexOf("?")?"&":"?")+c.data:a+"",this.content.find("iframe").attr("src",f).on("load",$.proxy(c.success||function(){},this))));b.modal&&(this.mask=new Mask(b.modal));this.hidden=!0;this.attach()}},attach:function(){this.show();var a=this;if(!this.container.data("instance"))this.container.data("instance",this).on("click","."+this.options.component.close,function(b){a.hide()});return this},build:function(a){function b(a){a=
$(a);return a.is("img,object,script")?a.outerHtml():a.html()}var c=this.options,f=$("#"+String(c.id)),h;if("string"===$.type(a))if("ajax"===c.async)h=c.ajaxTpl;else if("iframe"===c.async)h=c.frameTpl;else try{h=b(a)}catch(e){}else isElement(a)&&(h=b(a));if(f.length)return isElement(a)&&f.data("instance").content.html(h),f;a='<div class="{container}" {id} data-module="dialog" tabindex="1">'+this.getTemplate()+"</div>";$.extend(c.component,{title:c.title,id:c.id?'id="'+c.id+'"':"",main:h});return $(substitute(a,
c.component)).appendTo(this.doc)},getTemplate:function(a){var b=this.options;a=a||b.type;var c='<div class="{body}">;<div class="{header}">;<h2>{title}</h2>;<span><button type="button" class="{close}" title="关闭" hidefocus><i>×</i></button></span>;</div>;<div class="{content}">{main}</div>;</div>'.split(";");if("nohead"===a)c[1]=c[2]=c[3]=c[4]="";else if("notitle"===a)c[2]="";else if("noclose"===a||b.autoHide)c[3]="";else if("string"===typeof a)return a;return c.join("\n")},show:function(){var a=this;
if(!this.hidden)return this;this.container.css("display","block");this.locate();this.options.useIframeShim&&$("<iframe/>",{frameborder:0,src:"about:blank",style:"position:absolute;z-index:-1;border:0 none;filter:alpha(opacity=0);top:"+-this.container.css("border-top-width")+";left:"+-this.container.css("border-left-width")+";width:"+this.container.outerWidth()+"px;height:"+this.container.outerHeight()+"px;"}).appendTo(this.container);this.container[0].focus();this.hidden=!1;this.trigger("show",this);
this.mask&&this.mask.show();this.options.autoHide&&(this.container.timer=setTimeout(function(){a.hide()},1E3*parseInt(this.options.autoHide)));return this},hide:function(a){if(this.hidden)return this;a=a||this.options.locate;"fixed"===a.pos&&$("body").css("overflow","auto");this.trigger("close",this);this.container.remove();this.hidden=!0;this.hideMask();return this},stopTimer:function(){this.container.timer&&(clearTimeout(this.container.timer),this.container.timer=null);return this},hideMask:function(){this.mask&&
this.mask.hide();return this},locate:function(a){a=a||this.options.locate;var b;this.size.y?b=this.container:this.container.height()>=$(window).height()&&(b=$(window));b&&isElement(b)&&this.options.height&&this.setHeight(b);this.container.locate(a);"fixed"===a.pos&&$("body").css("overflow","hidden");return this},setHeight:function(a){a=a||this.container;this.content.height(a.height()-this.container.patch().y-this.body.patch().y-this.header.outerHeight()-this.content.patch().y)}}),Mask=new Class({options:{"class":"mask"},
init:function(a){this.target=$(this.options.target||document.body);this.setOptions(a);this.element=$("<div>",{"data-module":"mask","class":this.options["class"]}).appendTo(this.target);this.hidden=!0},setSize:function(){this.element.is(":visible")&&"fixed"!==this.element.css("position")&&this.element.css({width:this.options.width||this.target.width(),height:this.options.height||this.target.height()})},locate:function(){this.element.locate()},show:function(){if(this.hidden)return this.options.resize&&
$(window).resize($.proxy(this.setSize,this)),this.setSize(),this.element.css("display","block"),this.options.zIndex&&this.element.css("z-index",this.options.zIndex),this.options.locate&&this.locate(),this.trigger("show",this),this.hidden=!1,this},hide:function(){if(!this.hidden)return this.options.resize&&$(window).off("resize",$.proxy(this.setSize,this)),this.element.remove(),this.trigger("hide",this),this.hidden=!0,this},toggle:function(){return this[this.hidden?"show":"hide"]()}});
$.dialog=function(a,b){return new Dialog(a,b)};$.fn.dialog=function(a){a=new Dialog(this,a);return this.data("dialogInstance",a)};$.dialog.alert=function(a,b){new Dialog($("<div>"+a+'<div class="actions"><button class="btn btn-simple dialog-btn-close"><span><span>确定</span></span></button></div></div>'),$.extend({width:330,modal:!0},b))};
$.dialog.confirm=function(a,b,c){new Dialog($("<div>"+a+'<div class="actions"><button class="btn btn-simple dialog-btn-close" data-return="1"><span><span>确定</span></span></button><button class="btn btn-simple dialog-btn-close" data-return="0"><span><span>取消</span></span></button></div></div>'),$.extend({width:330,modal:!0,show:function(a){var c=this;this.close.on("click",function(){parseInt($(this).attr("data-return"),10)&&"function"===$.type(b)&&b.call(c)})}},c))};
$.dialog.image=function(a,b){new Dialog('<img class="image-load-container dialog-btn-close" src="'+a+'">',$.extend({type:'<div class="{body}">{main}</div>',load:function(){var a=this;$(".image-load-container").load(function(){this.width>=$(window).width()&&$(this).width($(window).width()-a.container.patch().x-a.body.patch().x);a.locate()})}},b))};$.dialog.ajax=function(a,b){new Dialog(a,$.extend({async:"ajax",asyncOptions:{type:b.type||"get"}},b))};
$.dialog.iframe=function(a,b){new Dialog(a,$.extend({width:600,useIframeShim:!1,async:"iframe"},b))};$(function(){var a=$("[data-toggle=dialog]"),b=$(a.data("target")||a.attr("href")),c=dataOptions(a,"dialog");if(a.length&&b.length)a.on("click",function(a){a.preventDefault();b.dialog(c)})});
function Message(a,b,c,f){if(!a)return null;isNaN(b)?"function"===$.type(c)?(f=c,c=3):(b=b||"show",c=isNaN(c)?3:c):(c=b,b="show");var h={container:"message-"+b,body:"message-body",content:"message-content",icon:{show:"",success:"&#x25;",error:"&#x21;"}[b]},e=$("#pop_message_"+b);a+='<i class="icon icon-tip"></i>';e&&(e=e.data("instance"))&&e.content.html(a).show();new Dialog($("<div>"+a+"</div>"),{id:"pop_message_"+b,type:"nohead",template:$("#message_template"),modal:!1,single:!0,autoHide:c,component:h,
show:function(){this.stopTimer()},close:"function"===$.type(f)?$.proxy(f,this):null})}Message.show=function(a,b,c){Message(a,"show",b,c)};Message.hide=function(a){try{$("#pop_message_"+(a||"show")).data("instance").hide()}catch(b){}};Message.error=function(a,b,c){Message(a,"error",b,c);return!1};Message.success=function(a,b,c){Message(a,"success",b,c);return!0};(function(a){a.fn.AjaxFileUpload=function(b){function c(b){var c=h.onSubmit.call(b.data.element,b.data.filename,b.data.container);if(!1===c)return a(b.target).remove(),b.data.iframe.remove(),!1;for(var e in c)a('<input type="hidden" name="'+e+'" value="'+c[e]+'">').appendTo(b.target)}function f(b){var c=a(b.target),e=a.trim(a((c[0].contentWindow||c[0].contentDocument).document.body).text()),e=e?JSON.parse(e):{};h.onComplete.call(b.data.element,e,b.data.container);b.data.form.remove();c.remove()}var h=
a.extend({},{url:"upload.php",onChange:function(a,b){},onSubmit:function(a,b){},onComplete:function(a,b){}},b),e=function(){var a=0;return function(){return"_AjaxFileUpload"+a++}}();return this.each(function(){var b=a(this);b.on("change","input[type=file]",function(g){var k=a(this).data("size")||h.size,m=a(this).data("remote")||h.url,p=a(this).data("max")||h.limit;g=a(g.target);if(p&&b.find(".img-thumbnail:not(.action-upload)").length+(g[0].multiple&&g[0].files?g[0].files.length:1)>p)alert("超出限制，最多上传"+
p+"张。");else{var l=g.attr("id"),l=g.removeAttr("id").clone().attr("id",l),q=g.val().replace(/.*(\/|\\)/,""),r;r=e();r=a('<iframe src="javascript:false;" width="0" height="0" frameborder="0" name="'+r+'" id="'+r+'" style="display: none;" />').appendTo("body");k=a('<form method="post" action="'+m+'" enctype="multipart/form-data" encoding="multipart/form-data" target="'+r[0].name+'" />').hide().append('<input type="hidden" name="MAX_FILE_SIZE" value="'+(k||"")+'">').append('<input type="hidden" name="FILE_LIMIT" value="'+
(p||"")+'">').appendTo("body");l.insertBefore(g);h.onChange.call(l[0],q,b);r.on("load",{element:l,form:k,container:b},f);k.append(g).on("submit",{element:l,iframe:r,filename:q,container:b},c).submit()}})})}})(jQuery);
$(function(){$(".images-uploader").AjaxFileUpload({onComplete:function(a,b){if(a.error)return alert(a.message);var c=$.makeArray(a.data),f=b.find("input[type=file]").attr("name");$.each(c,function(){b.find(".action-upload").before('<div class="handle img-thumbnail"><i class="icon-close-b action-remove"></i><a href="'+this.url+'" target="_blank"><img src="'+this.url+'"></a><input type="hidden" name="'+f+'" value="'+this.image_id+'"></div>')});b.on("click",".action-remove",function(a){$(this).parent().remove()});
b.on("mouseover",".img-thumbnail",function(a){$(this).find(".action-remove").show()});b.on("mouseout",".img-thumbnail",function(a){$(this).find(".action-remove").hide()})}})});