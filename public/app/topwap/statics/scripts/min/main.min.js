function isElement(e){return e&&e.length&&(e=e[0]),!(!e||!e.nodeName||1!==e.nodeType)}function checkAll(e,t){$(t).prop("checked",$(e).prop("checked"))}function getDomOptions(e,t){if(!t)throw new Error("请传入prefix参数");t=new RegExp("^"+t.toLowerCase());for(var n,i,o={},a=e&&e.attributes,r=a&&a.length;r--;)i=a[r],n=i.name,"data-"===n.substring(0,5)&&(n=n.substring(5),i=parseData(i.value),void 0===i||(o[n]=i));return o}function dataOptions(e,t){if(!t)throw new Error("dataOptions：请传入prefix参数");var n,i=$(e).data(),o={},a=new RegExp("^"+t.toLowerCase()+"([A-Z])");t=new RegExp("^"+t.toLowerCase());for(var r in i)t.test(r)&&(n=r.replace(a,function(e,t){return t.toLowerCase()}),o[n]=i[r]);return o}function evalScripts(e,t,n){if(e){var i="",o=e.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(){return i+=arguments[1]+"\n",""});return $(t).html(n?o:e),n&&$.globalEval(i),o}}function countdown(e,t){function n(e,t,i){var o="",r=!1,s={d:0,h:0,m:0,s:0,t:0},c=Math.round(+new Date/1e3),l={d:"天",h:"时",m:"分",s:"秒"};if(s.s=t-c,!(s.s<0))return 0==s.s&&i&&i(),a||(Math.floor(s.s/86400)>0&&(s.d=Math.floor(s.s/86400),s.s=s.s%86400,o+=s.d+l.d,r=!0),Math.floor(s.s/3600)>0&&(s.h=Math.floor(s.s/3600),s.s=s.s%3600,r=!0)),r&&(o+=" "+s.h+l.h,r=!0),a||Math.floor(s.s/60)>0&&(s.m=Math.floor(s.s/60),s.s=s.s%60,r=!0),r&&(o+=" "+s.m+l.m,r=!0),Math.floor(s.s)>0&&(r=!0),r&&(o+=" "+s.s+l.s,r=!0),$(e).html(o),setTimeout(function(){n(e,t,i)},1e3)}var i=this;t=$.extend({start:60,secondOnly:!1,callback:null},t||{});var o=t.start,a=t.secondOnly,r=t.callback,s=+new Date,c=Math.round((s+1e3*o)/1e3);this.timer=n(e,c,r),this.stop=function(){clearTimeout(i.timer)}}function changeVerify(e,t){$(e).each(function(e){var n,i,o=$(this);"IMG"===this.tagName?(i=$(this),n=o.attr("src")):(i=o.siblings("img"),n=o.attr("href")),t?o.on("click",function(){changeCode(i,n)}):changeCode(i,n)})}function changeCode(e,t){t=t||e.attr("src");var n=+new Date,i=t.match(/\b_=([\d]+)\b/);return i?t=t.replace(i[1],n):t+=(t.indexOf("?")>-1?"&":"?")+"_="+n,e.attr("src",t),!1}function stylePrice(e,t){var n=$("[data-denomination]");if(n.length)for(var i=0;i<n.length;i++)if($(n[i]).data("denomination")==e){var o=$(n[i]).text();o=t?o.substring(0,1)+parseInt(o.substring(1,o.length)):"<em>"+o.substring(0,1)+"</em>"+parseInt(o.substring(1,o.length)),$(n[i]).html(o)}}$.fn.some=function(e,t){return Array.prototype.slice.call(this).some(e,t)},$.fn.every=function(e,t){return Array.prototype.slice.call(this).every(e,t)},$.globalEval=function(e){e&&e.trim()&&(window.execScript||function(e){window.eval.call(window,e)})(e)},Date.format=function(e,t){t&&(t=t.match(/^([yY]{2,4})([.:\/-])([mM]{1,2})\3([dD]{1,2})$/gi)),e=new Date((+e));var n=e.getFullYear(),i=e.getMonth()+1,o=e.getDate();return n+"."+i+"."+o};var Currency={spec:{decimals:2,dec_point:".",thousands_sep:"",sign:"￥"},format:function(e,t){var n,i=this.spec.sign||"";if(!e&&0!==e||isNaN(+e))return e;var e=parseFloat(e);this.spec.cur_rate&&(e*=this.spec.cur_rate),e=Math.round(e*Math.pow(10,this.spec.decimals))/Math.pow(10,this.spec.decimals)+"";var o=e.indexOf(".");for(o<0?(o=e.length,n=""):n=e.substr(o+1);n.length<this.spec.decimals;)n+="0";for(var a=[];o>0;){if(!(o>2)){a.unshift(e.substr(0,o));break}o-=3,a.unshift(e.substr(o,3))}return n||(this.spec.dec_point=""),t&&(i='<span class="price-currency">'+i+"</span>"),i+a.join(this.spec.thousands_sep)+this.spec.dec_point+n},number:function(e){return e?(isNaN(+e)&&((e instanceof jQuery||e.nodeName&&1===e.nodeType)&&(e=$(e).val()||$(e).text()),0==e.indexOf(this.spec.sign)&&(e=e.split(this.spec.sign)[1])),+e):null},calc:function(e,t,n,i){if(!t&&0!==t)return null;if(n){e=e&&"add"!=e?-1:1;var o=1,a=1;t instanceof Array&&t.length&&(o=t[1],t=t[0]),n instanceof Array&&n.length&&(a=n[1],n=n[0]);var r=Math.pow(10,this.spec.decimals*this.spec.decimals);t=Math.abs(o*r*this.number(t)+e*a*r*this.number(n))/r}else t=this.number(t);return i||(t=this.format(t)),t},add:function(e,t,n){return this.calc("add",e,t,n)},diff:function(e,t,n){return this.calc("diff",e,t,n)}};$(function(){var e=document.forms;e.length&&(changeVerify($("form .auto-change-verify-handle"),!0),$("form [data-remote]").on("change",function(e){var t=$(this),n=this.value,i=this.name,o=$(this).data("remote"),a=t.data("remoteType")||t.parents("form").attr("method"),r=t.data("remoteCallback");o&&i&&n&&$[a](o,i+"="+n,function(e){if("string"==typeof e&&(e=JSON.parse(e)),r)return r.call(t,e);var n=Tips.init({target:t.closest(".form-row")});return e.error?n.error(e.message):e.success?n.success(e.message):void 0})})),$("body").on("tap",".shopex-linkto",function(){var e=$(this).attr("href");location.href=e})});var AreaWidget=function(e){var t=this;t.options={dataUrl:"data.json",select:null,level:3,name:"area[]",initData:null,initCallback:function(){}};var n=function(){t.options=$.extend(t.options,e),t.box=t.options.select,$.ajax({type:"GET",url:t.options.dataUrl,dataType:"json",success:function(e){e?i(e):t.box.html("地区数据加载异常,请检查网络。")}})},i=function(e){t.box.empty(),t.data=e,t.nowList=[],t.selectList=[],t.selected=[];for(var n=0;n<t.options.level;n++)0==n?t.selectList[n]=$("<select></select>").appendTo(t.box).change(o):t.selectList[n]=$('<select style="display:none;"></select>').appendTo(t.box).change(o);var i="";if($.each(t.data,function(e,n){i+="<option value='"+t.data[e].id+"'>"+t.data[e].value+"</option>"}),t.selectList[0].html('<option value="">-请选择-</option>'+i),t.nowList[0]=t.data,t.options.initData){t.input=$('<input type="hidden" name="'+t.options.name+'" value="'+t.options.initData+'">').appendTo(t.box);var a=t.options.initData.split(",");$.each(t.selectList,function(e,t){a[e]&&t.val(a[e]).trigger("change")}),t.options.initCallback.call(t)}else t.input=$('<input type="hidden" name="'+t.options.name+'">').appendTo(t.box)},o=function(){var e=$(this),n=0,i=e.index();if(e.find("option").each(function(e,t){t.selected&&(n=e-1)}),t.selected[i+1])for(var o=i+1;o<t.options.level;o++)t.selectList[o].hide(),t.selected.pop();if(e.val()?t.selected[i]=e.val():delete t.selected[i],t.input.val(t.selected.join(",")),i+1<t.options.level){if(t.nowList[i+1]=t.nowList[i][n].children,"undefined"==typeof t.nowList[i+1])return t.nowList[i+1]=null,t.selectList[i+1].html("<option> -- </option>"),0;var a="";$.each(t.nowList[i+1],function(e,n){a+="<option value='"+t.nowList[i+1][e].id+"'>"+t.nowList[i+1][e].value+"</option>"}),t.selectList[i+1].show().html('<option value="">请选择</option>'+a)}};n()};$.fn.multiSelect=function(e){var t=new AreaWidget($.extend({select:this},e||{}));return $(this).data("multiSelectInstance",t)},function(e){"function"==typeof define&&define.amd?define(["Zepto"],e):e("object"==typeof exports?require("Zepto"):Zepto)}(function(e){function t(e){return s.raw?e:encodeURIComponent(e)}function n(e){return s.raw?e:decodeURIComponent(e)}function i(e){return t(s.json?JSON.stringify(e):String(e))}function o(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(r," ")),s.json?JSON.parse(e):e}catch(t){}}function a(t,n){var i=s.raw?t:o(t);return e.isFunction(n)?n(i):i}var r=/\+/g,s=e.cookie=function(o,r,c){if(void 0!==r&&!e.isFunction(r)){if(c=e.extend({},s.defaults,c),"number"==typeof c.expires){var l=c.expires,u=c.expires=new Date;u.setTime(+u+864e5*l)}return document.cookie=[t(o),"=",i(r),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}for(var p=o?void 0:{},f=document.cookie?document.cookie.split("; "):[],d=0,h=f.length;d<h;d++){var m=f[d].split("="),v=n(m.shift()),g=m.join("=");if(o&&o===v){p=a(g,r);break}o||void 0===(g=a(g))||(p[v]=g)}return p};s.defaults={},e.removeCookie=function(t,n){return void 0!==e.cookie(t)&&(e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t))}});
var validatorMap={required:["此项必填",function(t,e,n){if("select"==n){var a=t.selectedIndex;return e=t.options[a].value,a>=0&&""!=e&&"_NULL_"!=e}return null!==e&&0!==e.length}],minlength:[function(t,e,n){return"null"!=$.type(n)?"输入不正确，至少"+n+"个字符":""},function(t,e,n,a,r){return null===e||""===e||"null"==$.type(r)||e.length>=+r}],maxlength:[function(t,e,n){return"null"!=$.type(n)?"输入不正确，最多"+n+"个字符":""},function(t,e,n,a,r){return null===e||""===e||"null"==$.type(r)||e.length<=+r}],number:["请填写数值",function(t,e){return!isNaN(e)&&!/^\s+$/.test(e)}],digits:["只能填写数字",function(t,e){return!/[^\d]/.test(e)}],posint:["请填写正整数",function(t,e){return!/[^\d]/.test(e)&&e>0}],natural:["请填写大于等于0的整数",function(t,e){return!/[^\d]/.test(e)&&e>=0}],positive:["请填写大于0的数值",function(t,e){return!isNaN(e)&&!/^\s+$/.test(e)&&e>0}],nonneg:["请填写大于等于0的数值",function(t,e){return!isNaN(e)&&!/^\s+$/.test(e)&&e>=0}],alpha:["只能填写英文字母",function(t,e){return null===e||""==e||/^[a-zA-Z]+$/.test(e)}],alphanumber:["请填写英文字母或者数字",function(t,e){return!/\W/.test(e)||/^[a-zA-Z0-9]+$/.test(e)}],alphanumcn:["请填写英文字母、中文或数字",function(t,e){return!/\W/.test(e)||/^[\u4e00-\u9fa5a-zA-Z0-9]+$/.test(e)}],uncnchar:["不能填写中文字符",function(t,e){return!/\W/.test(e)||!/^[\u4e00-\u9fa5]+$/.test(e)}],date:["请填写日期，格式yyyy-mm-dd",function(t,e){return null===e||""==e||/^(?:19|20)[0-9]{2}[\/-](?:[1-9]|0[1-9]|1[012])[\/-](?:[1-9]|0[1-9]|[12][0-9]|3[01])$/.test(e)}],email:["请填写正确的email地址",function(t,e){return null===e||""==e||/^[a-z\d][a-z\d_.]*@[\w-]+(?:\.[a-z]{2,})+$/i.test(e)}],emaillist:['请填写正确的email地址，以","或";"分隔',function(t,e){return null===e||""==e||/^(?:[a-z\d][a-z\d_.]*@[\w-]+(?:\.[a-z]{2,})+[,;\s]?)+$/i.test(e)}],mobile:["请填写正确的手机号码",function(t,e){return null===e||""==e||/^0?1(?:[38]\d)|(?:4[579])|(?:[57][0-35-9])\d{8}$/.test(e)}],landline:["请填写正确的座机号码",function(t,e){return null===e||""==e||/^(0\d{2,3}-?)?[2-9]\d{5,7}(-\d{1,5})?$/.test(e)}],tel:["请填写正确的固话或手机号码",function(t,e){return null===e||""==e||/^0?1(?:[38]\d)|(?:4[579])|(?:[57][0-35-9])\d{8}$|^(0\d{2,3}-?)?[2-9]\d{5,7}(-\d{1,5})?$/.test(e)}],zip:["请填写正确的邮编",function(t,e){return null===e||""==e||/^\d{6}$/.test(e)}],url:["请填写正确的网址",function(t,e){var n="^((https|http|ftp|rtsp|mms)?://)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$",a=new RegExp(n,"i");return null===e||""==e||a.test(e)}],area:["请选择完整的地区",function(t,e){return $(t).find("select").every(function(t){var e=t.value;return t.offsetHeight+t.offsetWidth===0||""!=e&&"_NULL_"!=e})}],equalto:["两次填写不一致",function(t,e,n,a,r){var i=$(a).find('[name="'+r+'"]');return!i[0]||e===i.val()}],oneoftwo:["请至少填写一项",function(t,e,n,a,r){var i=$(a).find('[name="'+r+'"]');return!i[0]||e||i.val()}],onerequired:["请至少选择一项",function(t,e,n,a){var r=t.name;return $(a).find("input"+(r?'[name="'+r+'"]':"")).some(function(t){return $.inArray(["checkbox","radio"],t.type)?t.checked:!!t.value})}]},validation=function(t,e){"string"==typeof e&&(e={range:e}),e=$.extend({group:".form-act",tips:{event:"tap",arrow:!0,placement:"left bottom"}},e||{});var n="data-validate",a="["+n+"], [pattern], [type=number], [type=email], [type=tel], [type=url], [type=date], [required], [minlength], [maxlength], [data-equalto], [data-oneoftwo]";if(t=t?$(t):null,!t)return!0;var r=t.data("validateConfig"),i=dataOptions(t,"validate");"string"==typeof r&&(r=JSON.parse(r)),e=$.extend(e,r||{},i),t.is("form")&&t.attr("novalidate","novalidate");var u=t.is("form")||"all"===e.range?t.find(a):$(t),o=[];return u.every(function(r,i){var u=$(r);if("none"===u.css("display")||r.offsetHeight+r.offsetWidth===0)return!0;var l=[];u.attr(n)&&(l=u.attr(n).split(" ")),u.attr("required")&&l.unshift("required");var s=u.attr("data-caution")||"",c=u.attr("pattern"),f=new RegExp("^(?:"+c+")$"),d="custom_"+$.uuid++;if(s=s?s.split(/&&|&amp;&amp;/):[],c&&(validatorMap[d]||(validatorMap[d]=[u.attr("data-attention")||"",function(t,e){return null===e||""===e||f.test(e)}]),l.push(d)),$.each(["number","url","email","tel","date"],function(t,e){u.attr("type")===e&&l.push(e)}),$.each(["minlength","maxlength","data-equalto","data-oneoftwo"],function(t,e){u.attr(e)&&l.push(e)}),!l.length)return!0;for(var p=!1,v=0,h=l.length;v<h;v++){var m=l[v],g=u.attr(m);m=m.replace(/^data-/,"");var y=validatorMap[m];if(y){y=y instanceof Array?y:["",y];var b=u.closest(e.group),x={msg:s[v]||("function"==typeof y[0]?y[0](u[0],u.val(),g):y[0])};if(y=y[1]||function(){return!0},!y(u[0],u.val(),u.attr("type"),t.is(a)?e.parent||t.parents("form")[0]||t.parent()[0]:t[0],g)){x.msg&&(shopex.alert(x.msg),b.addClass("has-error")),p=!1;break}b.removeClass("has-error"),p=!0}else p=!0}return!!p||(o.push(u),!1)}),!o.length||(o.shift().focus(),!1)};$.fn.validation=function(t){return validation(this,t)},function(){var t="disabled",e=function(e,n){var a,r,i,u=$(e),o={},l=function(t,e){e=e||{};var n,r={},i="submit"===t.attr("type"),u=dataOptions(t,"ajax");if("string"==typeof u.config)try{r=JSON.parse(u.config)||{},delete u.config}catch(o){}else $.isPlainObject(u.config)&&(r=u.config,delete u.config);i&&(a=t.parents("form")),n=a&&a[0]?{url:a[0].action,data:a.serialize(),type:a[0].method||"post"}:{url:t.attr("href"),type:u.type||"get"};var l=t.attr("target");return l&&["_self","_blank","_parent","_top"].indexOf(l)<0&&(n.addition=l),r=$.extend(!0,n,e,r,u),isElement(r.data)&&(r.data=$(r.data).serialize()),"string"==typeof r.data?r.data+="&response_json=true":$.isPlainObject(r.data)&&(r.data.response_json=!0),r},s=function(t){t.removeClass(n.disabled)},c=function(t,e){t.data("ajaxCache",e)},f=function(t){return t.data("ajaxCache")},d=function(t){var e=f(t);return!(!n.syncCache||!e)&&(e.success(o.data),!0)},p=function(t){"string"==typeof t&&(t=JSON.parse(t)),o.json=t,v(t)},v=function(t){s(u),n.syncCache&&u[0]&&c(u,n),o.json?h(t):("function"==typeof n.callback&&n.callback(null,u),location.href=n.url+(/\?/.test(n.url)?"&":"?")+n.data)},h=function(t){function e(){"function"==typeof n.callback&&n.callback(t,u)}function a(){o&&("back"==o?history.back():"reload"==o?location.reload():location.href=o)}function r(){e(),a()}if(t){if(n.progress)return n.progress.call(null,t,u);var i,o=t.redirect;n.showMessage&&!["error","success"].every(function(e){return i=t.message,!i||!t[e]||(n.inject?e===n.tipHidden?m(e,i):g(e,i):shopex.toast(i,r),!1)})||r()}},m=function(){r&&i&&i.remove()},g=function(t,e){var a,r=$(n.inject),u=n.position,o=n.ajaxTip,l=n.tipCls,t=t+l;if(r)return a=r.getParent(),i=a.getElement("."+o),a&&i?i.html(e):void $('<div class="'+t+" "+o+'">'+e+"</div>").appendTo(r,u)},y=function(t){t.addClass(n.disabled)},b=function(t,e){return e?$.globalEval(t):evalScripts(t,null,!0)},x=function(t){t=t||{};var e=a||t.data;return!(isElement(e)&&!validation(e))};return(u||u.length)&&(n=l(u,n)),n=$.extend({disabled:t,hideDelay:3,showMessage:!0,position:"before",tipCls:"-tip",ajaxTip:"ajax-tip",beforeSend:function(t,e){if(u.length){if(u.hasClass(n.disabled)||!x()||d(u))return!1;y(u)}},success:function(t,e,a){o.data=t;var r=a.getResponseHeader("Content-type");return/application\/json/.test(r)?p(t):void(n.update?("function"==typeof n.callback&&n.callback(a),$(n.update).html(t)):v(b(t,/(ecma|java)script/.test(r))))},error:function(){s(u)}},n||{})};this.async=function(n,a,r){var i=n.data("ajaxCache");if(n.hasClass(t))return!1;if($.isPlainObject(a))r=a,a=null;else if(isElement(a)){if(!validation(a,r))return n.removeClass(t),!1;if(r&&r.async===!1)return}else if(i)return $.ajax(i);if(r=e(n,r),r.addition){var u=r.addition.split("::");return"confirm"===u[0]&&u[1]&&shopex.alert('<div style="margin-top:30px;"><p align="center">'+u[1]+"</p></div>"),!1}return $.ajax(r)},this.Event_Group={_request:{fn:async}}}(),$(document).on("click",function(t){var e="rel",n=$(t.target),a=n.closest("[type=submit]");if(a=a.length?a:n.closest("["+e+"]"),a[0]&&9!==a[0].nodeType&&!a[0].disabled){var r,i=a.parents("form"),u=a.attr(e),o=Event_Group[u];if(i[0]&&"false"===i.attr("data-async"))return validation(i);if("submit"===a[0].type&&i[0]&&i.attr("target"))return async(a,i,{async:!1});if("submit"===a[0].type&&"_request"!==u)return t.preventDefault(),async(a,i);if(o){if(r=o.fn,t.preventDefault(),a.attr(u))return a;r&&r(a)}}});
!function(o,t){var e=o.className("zoom"),n=o.className("zoom-scroller"),r="."+e,a="."+n,i="pinchstart",s="pinch",l="pinchend";"ongesturestart"in t&&(i="gesturestart",s="gesturechange",l="gestureend"),o.Zoom=function(t,e){var n=this;n.options=o.extend(o.Zoom.defaults,e),n.wrapper=n.element=t,n.scroller=t.querySelector(a),n.scrollerStyle=n.scroller&&n.scroller.style,n.zoomer=t.querySelector(r),n.zoomerStyle=n.zoomer&&n.zoomer.style,n.init=function(){o.options.gestureConfig.pinch=!0,o.options.gestureConfig.doubletap=!0,n.initEvents()},n.initEvents=function(t){var e=t?"removeEventListener":"addEventListener",r=n.scroller;r[e](i,n.onPinchstart),r[e](s,n.onPinch),r[e](l,n.onPinchend),r[e](o.EVENT_START,n.onTouchstart),r[e](o.EVENT_MOVE,n.onTouchMove),r[e](o.EVENT_CANCEL,n.onTouchEnd),r[e](o.EVENT_END,n.onTouchEnd),r[e]("drag",n.dragEvent),r[e]("doubletap",n.doubleTapEvent)},n.dragEvent=function(o){(d||u)&&o.stopPropagation()},n.doubleTapEvent=function(o){n.toggleZoom(o.detail.center)},n.transition=function(o,t){return t=t||0,o.webkitTransitionDuration=t+"ms",n},n.translate=function(o,t,e){return t=t||0,e=e||0,o.webkitTransform="translate3d("+t+"px,"+e+"px,0px)",n},n.scale=function(o,t){return t=t||1,o.webkitTransform="translate3d(0,0,0) scale("+t+")",n},n.scrollerTransition=function(o){return n.transition(n.scrollerStyle,o)},n.scrollerTransform=function(o,t){return n.translate(n.scrollerStyle,o,t)},n.zoomerTransition=function(o){return n.transition(n.zoomerStyle,o)},n.zoomerTransform=function(o){return n.scale(n.zoomerStyle,o)};var m=1,c=1,f=!1,u=!1;n.onPinchstart=function(o){u=!0},n.onPinch=function(o){f||(n.zoomerTransition(0),f=!0),m=(o.detail?o.detail.scale:o.scale)*c,m>n.options.maxZoom&&(m=n.options.maxZoom-1+Math.pow(m-n.options.maxZoom+1,.5)),m<n.options.minZoom&&(m=n.options.minZoom+1-Math.pow(n.options.minZoom-m+1,.5)),n.zoomerTransform(m)},n.onPinchend=function(o){m=Math.max(Math.min(m,n.options.maxZoom),n.options.minZoom),n.zoomerTransition(n.options.speed).zoomerTransform(m),c=m,f=!1},n.setZoom=function(o){m=c=o,n.scrollerTransition(n.options.speed).scrollerTransform(0,0),n.zoomerTransition(n.options.speed).zoomerTransform(m)},n.toggleZoom=function(t,e){if("number"==typeof t&&(e=t,t=void 0),e="undefined"==typeof e?n.options.speed:e,m&&1!==m)m=c=1,n.scrollerTransition(e).scrollerTransform(0,0);else if(m=c=n.options.maxZoom,t){var r=o.offset(n.zoomer),a=r.top,i=r.left,s=(t.x-i)*m,l=(t.y-a)*m;this._cal(),s>=v&&s<=v+p?s=v-s+p/2:s<v?s=v-s+p/2:s>v+p&&(s=v+p-s-p/2),l>=y&&l<=y+h?l=y-l+h/2:l<y?l=y-l+h/2:l>y+h&&(l=y+h-l-h/2),s=Math.min(Math.max(s,E),v),l=Math.min(Math.max(l,x),y),n.scrollerTransition(e).scrollerTransform(s,l)}else n.scrollerTransition(e).scrollerTransform(0,0);n.zoomerTransition(e).zoomerTransform(m)},n._cal=function(){p=n.wrapper.offsetWidth,h=n.wrapper.offsetHeight,z=n.zoomer.offsetWidth,w=n.zoomer.offsetHeight;var o=z*m,t=w*m;E=Math.min(p/2-o/2,0),v=-E,x=Math.min(h/2-t/2,0),y=-x};var p,h,T,d,g,M,E,x,v,y,z,w,Z,b,N,S,V,_,A,P={},k={};return n.onTouchstart=function(t){t.preventDefault(),T=!0,P.x=t.type===o.EVENT_START?t.targetTouches[0].pageX:t.pageX,P.y=t.type===o.EVENT_START?t.targetTouches[0].pageY:t.pageY},n.onTouchMove=function(t){if(t.preventDefault(),T){if(!d){p=n.wrapper.offsetWidth,h=n.wrapper.offsetHeight,z=n.zoomer.offsetWidth,w=n.zoomer.offsetHeight;var e=o.parseTranslateMatrix(o.getStyles(n.scroller,"webkitTransform"));Z=e.x||0,b=e.y||0,n.scrollerTransition(0)}var r=z*m,a=w*m;if(!(r<p&&a<h)){if(E=Math.min(p/2-r/2,0),v=-E,x=Math.min(h/2-a/2,0),y=-x,k.x=t.type===o.EVENT_MOVE?t.targetTouches[0].pageX:t.pageX,k.y=t.type===o.EVENT_MOVE?t.targetTouches[0].pageY:t.pageY,!d&&!f&&(Math.floor(E)===Math.floor(Z)&&k.x<P.x||Math.floor(v)===Math.floor(Z)&&k.x>P.x))return void(T=!1);d=!0,g=k.x-P.x+Z,M=k.y-P.y+b,g<E&&(g=E+1-Math.pow(E-g+1,.8)),g>v&&(g=v-1+Math.pow(g-v+1,.8)),M<x&&(M=x+1-Math.pow(x-M+1,.8)),M>y&&(M=y-1+Math.pow(M-y+1,.8)),N||(N=k.x),_||(_=k.y),S||(S=o.now()),V=(k.x-N)/(o.now()-S)/2,A=(k.y-_)/(o.now()-S)/2,Math.abs(k.x-N)<2&&(V=0),Math.abs(k.y-_)<2&&(A=0),N=k.x,_=k.y,S=o.now(),n.scrollerTransform(g,M)}}},n.onTouchEnd=function(o){if(o.touches.length||(u=!1),!T||!d)return T=!1,void(d=!1);T=!1,d=!1;var t=300,e=300,r=V*t,a=g+r,i=A*e,s=M+i;0!==V&&(t=Math.abs((a-g)/V)),0!==A&&(e=Math.abs((s-M)/A));var l=Math.max(t,e);g=a,M=s;var c=z*m,f=w*m;E=Math.min(p/2-c/2,0),v=-E,x=Math.min(h/2-f/2,0),y=-x,g=Math.max(Math.min(g,v),E),M=Math.max(Math.min(M,y),x),n.scrollerTransition(l).scrollerTransform(g,M)},n.destroy=function(){n.initEvents(!0),delete o.data[n.wrapper.getAttribute("data-zoomer")],n.wrapper.setAttribute("data-zoomer","")},n.init(),n},o.Zoom.defaults={speed:300,maxZoom:3,minZoom:1},o.fn.zoom=function(t){var e=[];return this.each(function(){var n=null,r=this,a=r.getAttribute("data-zoomer");a?n=o.data[a]:(a=++o.uuid,o.data[a]=n=new o.Zoom(r,t),r.setAttribute("data-zoomer",a)),e.push(n)}),1===e.length?e[0]:e}}(shopex,window);
!function(e,t){var i='<div id="{{id}}" class="shopex-slider shopex-preview-image shopex-fullscreen"><div class="shopex-preview-header">{{header}}</div><div class="shopex-slider-group"></div><div class="shopex-preview-footer shopex-hidden">{{footer}}</div><div class="shopex-preview-loading"><span class="shopex-spinner shopex-spinner-white"></span></div></div>',s='<div class="shopex-slider-item shopex-zoom-wrapper {{className}}"><div class="shopex-zoom-scroller"><img src="{{src}}" data-preview-lazyload="{{lazyload}}" style="{{style}}" class="shopex-zoom"></div></div>',r="__DEFAULT",a=document.createElement("div"),o=function(t){this.options=e.extend(!0,{id:"__shopex_PREVIEWIMAGE",zoom:!0,header:'<span class="shopex-preview-indicator"></span>',footer:""},t||{}),this.init(),this.initEvent()},n=o.prototype;n.init=function(){var t=this.options,s=document.getElementById(this.options.id);s||(a.innerHTML=i.replace(/\{\{id\}\}/g,this.options.id).replace("{{header}}",t.header).replace("{{footer}}",t.footer),document.body.appendChild(a.firstElementChild),s=document.getElementById(this.options.id)),this.element=s,this.scroller=this.element.querySelector(e.classSelector(".slider-group")),this.indicator=this.element.querySelector(e.classSelector(".preview-indicator")),this.loader=this.element.querySelector(e.classSelector(".preview-loading")),t.footer&&this.element.querySelector(e.classSelector(".preview-footer")).classList.remove(e.className("hidden")),this.addImages()},n.initEvent=function(){var t=this;e(document.body).on("tap","img[data-preview-src]",function(){return t.open(this),!1});var i=null,s=function(){!i&&(i=e.later(function(){t.loader.removeEventListener("tap",s),t.scroller.removeEventListener("tap",s),t.close()},300))};this.scroller.addEventListener("doubletap",function(){i&&(i.cancel(),i=null)}),this.element.addEventListener("webkitAnimationEnd",function(){t.element.classList.contains(e.className("preview-out"))?(t.element.style.display="none",t.element.classList.remove(e.className("preview-out")),t.element.classList.remove(e.className("preview-in")),i=null):(t.loader.addEventListener("tap",s),t.scroller.addEventListener("tap",s))}),this.element.addEventListener("slide",function(i){if(t.options.zoom){var s=t.element.querySelector(".shopex-zoom-wrapper:nth-child("+(t.lastIndex+1)+")");s&&e(s).zoom().setZoom(1)}var r=i.detail.slideNumber;t.lastIndex=r,t.indicator&&(t.indicator.innerText=r+1+"/"+t.currentGroup.length),t._loadItem(r)})},n.addImages=function(e,t){this.groups={};var i=[];if(i=e?e===r?document.querySelectorAll("img[data-preview-src]:not([data-preview-group])"):document.querySelectorAll("img[data-preview-src][data-preview-group='"+e+"']"):document.querySelectorAll("img[data-preview-src]"),i.length)for(var s=0,a=i.length;s<a;s++)this.addImage(i[s])},n.addImage=function(e){var t=e.getAttribute("data-preview-group");t=t||r,this.groups[t]||(this.groups[t]=[]);var i=e.getAttribute("src");if(e.__shopex_img_data&&e.__shopex_img_data.src===i)this.groups[t].push(e.__shopex_img_data);else{var s=e.getAttribute("data-preview-src");s||(s=i);var a={src:i,lazyload:i===s?"":s,loaded:i===s,sWidth:0,sHeight:0,sTop:0,sLeft:0,sScale:1,el:e};this.groups[t].push(a),e.__shopex_img_data=a}},n.empty=function(){this.scroller.innerHTML=""},n._initImgData=function(i,s){if(!i.sWidth){var r=i.el;i.sWidth=r.offsetWidth,i.sHeight=r.offsetHeight;var a=e.offset(r);i.sTop=a.top,i.sLeft=a.left,i.sScale=Math.max(i.sWidth/t.innerWidth,i.sHeight/t.innerHeight)}s.style.webkitTransform="translate3d(0,0,0) scale("+i.sScale+")"},n._getScale=function(e,t){var i=e.width/t.width,s=e.height/t.height,r=1;return r=i<=s?e.height/(t.height*i):e.width/(t.width*s)},n._imgTransitionEnd=function(t){var i=t.target;i.classList.remove(e.className("transitioning")),i.removeEventListener("webkitTransitionEnd",this._imgTransitionEnd.bind(this))},n._loadItem=function(t,i){var s=this.scroller.querySelector(e.classSelector(".slider-item:nth-child("+(t+1)+")")),r=this.currentGroup[t],a=s.querySelector("img");if(this._initImgData(r,a),i){var o=this._getPosition(r);a.style.webkitTransitionDuration="0ms",a.style.webkitTransform="translate3d("+o.x+"px,"+o.y+"px,0) scale("+r.sScale+")",a.offsetHeight}if(!r.loaded&&a.getAttribute("data-preview-lazyload")){var n=this;n.loader.classList.add(e.className("active")),a.style.webkitTransitionDuration="0.5s",a.addEventListener("webkitTransitionEnd",n._imgTransitionEnd.bind(n)),a.style.webkitTransform="translate3d(0,0,0) scale("+r.sScale+")",this.loadImage(a,function(){r.loaded=!0,a.src=r.lazyload,n._initZoom(s,this.width,this.height),a.classList.add(e.className("transitioning")),a.addEventListener("webkitTransitionEnd",n._imgTransitionEnd.bind(n)),a.setAttribute("style",""),a.offsetHeight,n.loader.classList.remove(e.className("active"))})}else r.lazyload&&(a.src=r.lazyload),this._initZoom(s,a.width,a.height),a.classList.add(e.className("transitioning")),a.addEventListener("webkitTransitionEnd",this._imgTransitionEnd.bind(this)),a.setAttribute("style",""),a.offsetHeight;this._preloadItem(t+1),this._preloadItem(t-1)},n._preloadItem=function(t){var i=this.scroller.querySelector(e.classSelector(".slider-item:nth-child("+(t+1)+")"));if(i){var s=this.currentGroup[t];if(!s.sWidth){var r=i.querySelector("img");this._initImgData(s,r)}}},n._initZoom=function(t,i,s){if(this.options.zoom&&!t.getAttribute("data-zoomer")){var r=t.querySelector(e.classSelector(".zoom"));if("IMG"===r.tagName){var a=this,o=a._getScale({width:t.offsetWidth,height:t.offsetHeight},{width:i,height:s});e(t).zoom({maxZoom:Math.max(o,1)})}else e(t).zoom()}},n.loadImage=function(e,t){var i=function(){t&&t.call(this)},s=new Image;s.onload=i,s.onerror=i,s.src=e.getAttribute("data-preview-lazyload")},n.getRangeByIndex=function(e,t){return{from:0,to:t-1}},n._getPosition=function(e){var i=e.sLeft-t.pageXOffset,s=e.sTop-t.pageYOffset,r=(t.innerWidth-e.sWidth)/2,a=(t.innerHeight-e.sHeight)/2;return{left:i,top:s,x:i-r,y:s-a}},n.refresh=function(i,r){this.currentGroup=r;for(var a=r.length,o=[],n=this.getRangeByIndex(i,a),l=n.from,d=n.to+1,c=i,h="",m="",p=(t.innerWidth,t.innerHeight,0);l<d;l++,p++){var u=r[l],g="";u.sWidth&&(g="-webkit-transform:translate3d(0,0,0) scale("+u.sScale+");transform:translate3d(0,0,0) scale("+u.sScale+")"),m=s.replace("{{src}}",u.src).replace("{{lazyload}}",u.lazyload).replace("{{style}}",g),l===i?(c=p,h=e.className("active")):h="",o.push(m.replace("{{className}}",h))}this.scroller.innerHTML=o.join(""),this.element.style.display="block",this.element.classList.add(e.className("preview-in")),this.lastIndex=c,this.element.offsetHeight,e(this.element).slider().gotoItem(c,0),this.indicator&&(this.indicator.innerText=c+1+"/"+this.currentGroup.length),this._loadItem(c,!0)},n.openByGroup=function(e,t){e=Math.min(Math.max(0,e),this.groups[t].length-1),this.refresh(e,this.groups[t])},n.open=function(e,t){this.isShown()||("number"==typeof e?(t=t||r,this.addImages(t,e),this.openByGroup(e,t)):(t=e.getAttribute("data-preview-group"),t=t||r,this.addImages(t,e),this.openByGroup(this.groups[t].indexOf(e.__shopex_img_data),t)))},n.close=function(i,s){if(this.isShown()){this.element.classList.remove(e.className("preview-in")),this.element.classList.add(e.className("preview-out"));var r=this.scroller.querySelector(e.classSelector(".slider-item:nth-child("+(this.lastIndex+1)+")")),a=r.querySelector("img");if(a){a.classList.add(e.className("transitioning"));var o=this.currentGroup[this.lastIndex],n=this._getPosition(o),l=n.left,d=n.top;d>t.innerHeight||l>t.innerWidth||d<0||l<0?(a.style.opacity=0,a.style.webkitTransitionDuration="0.5s",a.style.webkitTransform="scale("+o.sScale+")"):(this.options.zoom&&e(a.parentNode.parentNode).zoom().toggleZoom(0),a.style.webkitTransitionDuration="0.5s",a.style.webkitTransform="translate3d("+n.x+"px,"+n.y+"px,0) scale("+o.sScale+")")}for(var c=this.element.querySelectorAll(e.classSelector(".zoom-wrapper")),h=0,m=c.length;h<m;h++)e(c[h]).zoom().destroy();e(this.element).slider().destroy()}},n.isShown=function(){return this.element.classList.contains(e.className("preview-in"))};var l=null;e.previewImage=function(e){return l||(l=new o(e)),l},e.getPreviewImage=function(){return l}}(shopex,window);
!function(e,t){e.dom=function(i){return"string"!=typeof i?i instanceof Array||i[0]&&i.length?[].slice.call(i):[i]:(e.__create_dom_div__||(e.__create_dom_div__=t.createElement("div")),e.__create_dom_div__.innerHTML=i,[].slice.call(e.__create_dom_div__.childNodes))};var i='<div class="shopex-poppicker">\t\t<div class="shopex-poppicker-header">\t\t\t<button class="shopex-btn shopex-poppicker-btn-cancel">取消</button>\t\t\t<button class="shopex-btn shopex-btn-blue shopex-poppicker-btn-ok">确定</button>\t\t\t<div class="shopex-poppicker-clear"></div>\t\t</div>\t\t<div class="shopex-poppicker-body">\t\t</div>\t</div>',s='<div class="shopex-picker">\t\t<div class="shopex-picker-inner">\t\t\t<div class="shopex-pciker-rule shopex-pciker-rule-ft"></div>\t\t\t<ul class="shopex-pciker-list">\t\t\t</ul>\t\t\t<div class="shopex-pciker-rule shopex-pciker-rule-bg"></div>\t\t</div>\t</div>';e.PopPicker=e.Class.extend({init:function(s){var c=this;c.options=s||{},c.options.buttons=c.options.buttons||["取消","确定"],c.panel=e.dom(i)[0],t.body.appendChild(c.panel),c.ok=c.panel.querySelector(".shopex-poppicker-btn-ok"),c.cancel=c.panel.querySelector(".shopex-poppicker-btn-cancel"),c.body=c.panel.querySelector(".shopex-poppicker-body"),c.mask=e.createMask(),c.cancel.innerText=c.options.buttons[0],c.ok.innerText=c.options.buttons[1],c.cancel.addEventListener("tap",function(e){c.hide()},!1),c.ok.addEventListener("tap",function(e){if(c.callback){var t=c.callback(c.getSelectedItems());t!==!1&&c.hide()}},!1),c.mask[0].addEventListener("tap",function(){c.hide()},!1),c._createPicker(),c.panel.addEventListener(e.EVENT_START,function(e){e.preventDefault()},!1),c.panel.addEventListener(e.EVENT_MOVE,function(e){e.preventDefault()},!1)},_createPicker:function(){var t=this,i=t.options.layer||1,c=100/i+"%";t.pickers=[];for(var a=1;a<=i;a++){var n=e.dom(s)[0];n.style.width=c,t.body.appendChild(n);var o=e(n).picker();t.pickers.push(o),n.addEventListener("change",function(e){var t=this.nextSibling;if(t&&t.picker){var i=e.detail||{},s=i.item||{};t.picker.setItems(s.children)}},!1)}},setData:function(e){var t=this;e=e||[],t.pickers[0].setItems(e)},getSelectedItems:function(){var e=this,t=[];for(var i in e.pickers){var s=e.pickers[i];t.push(s.getSelectedItem()||{})}return t},show:function(i){var s=this;s.callback=i,s.mask.show(),t.body.classList.add(e.className("poppicker-active-for-page")),s.panel.classList.add(e.className("active")),s.__back=e.back,e.back=function(){s.hide()}},hide:function(){var i=this;i.disposed||(i.panel.classList.remove(e.className("active")),i.mask.close(),t.body.classList.remove(e.className("poppicker-active-for-page")),e.back=i.__back)},dispose:function(){var e=this;e.hide(),setTimeout(function(){e.panel.parentNode.removeChild(e.panel);for(var t in e)e[t]=null,delete e[t];e.disposed=!0},300)}})}(shopex,document);
!function(e,t,n,i){var r=30,a=90,l=40,s=10,o=e.rad2deg=function(e){return e/(Math.PI/180)},c=(e.deg2rad=function(e){return e*(Math.PI/180)},navigator.platform.toLowerCase()),g=navigator.userAgent.toLowerCase(),d=(g.indexOf("iphone")>-1||g.indexOf("ipad")>-1||g.indexOf("ipod")>-1)&&(c.indexOf("iphone")>-1||c.indexOf("ipad")>-1||c.indexOf("ipod")>-1),p=e.Picker=function(e,t){var n=this;n.holder=e,n.options=t||{},n.init(),n.initInertiaParams(),n.calcElementItemPostion(!0),n.bindEvent()};p.prototype.findElementItems=function(){var e=this;return e.elementItems=[].slice.call(e.holder.querySelectorAll("li")),e.elementItems},p.prototype.init=function(){var e=this;e.list=e.holder.querySelector("ul"),e.findElementItems(),e.height=e.holder.offsetHeight,e.r=e.height/2-s,e.d=2*e.r,e.itemHeight=e.elementItems.length>0?e.elementItems[0].offsetHeight:l,e.itemAngle=parseInt(e.calcAngle(.8*e.itemHeight)),e.hightlightRange=e.itemAngle/2,e.visibleRange=a,e.beginAngle=0,e.beginExceed=e.beginAngle-r,e.list.angle=e.beginAngle,d&&(e.list.style.webkitTransformOrigin="center center "+e.r+"px")},p.prototype.calcElementItemPostion=function(e){var t=this;e&&(t.items=[]),t.elementItems.forEach(function(n){var i=t.elementItems.indexOf(n);if(t.endAngle=t.itemAngle*i,n.angle=t.endAngle,n.style.webkitTransformOrigin="center center -"+t.r+"px",n.style.webkitTransform="translateZ("+t.r+"px) rotateX("+-t.endAngle+"deg)",e){var r={};r.text=n.innerHTML||"",r.value=n.getAttribute("data-value")||r.text,t.items.push(r)}}),t.endExceed=t.endAngle+r,t.calcElementItemVisibility(t.beginAngle)},p.prototype.calcAngle=function(e){var t=this,n=b=parseFloat(t.r);e=Math.abs(e);var i=180*parseInt(e/t.d);e%=t.d;var r=(n*n+b*b-e*e)/(2*n*b),a=i+o(Math.acos(r));return a},p.prototype.calcElementItemVisibility=function(e){var t=this;t.elementItems.forEach(function(n){var i=Math.abs(n.angle-e);i<t.hightlightRange?n.classList.add("highlight"):i<t.visibleRange?(n.classList.add("visible"),n.classList.remove("highlight")):(n.classList.remove("highlight"),n.classList.remove("visible"))})},p.prototype.setAngle=function(e){var t=this;t.list.angle=e,t.list.style.webkitTransform="perspective(1000px) rotateY(0deg) rotateX("+e+"deg)",t.calcElementItemVisibility(e)},p.prototype.bindEvent=function(){var t=this,n=0,i=null,r=!1;t.holder.addEventListener(e.EVENT_START,function(e){r=!0,e.preventDefault(),t.list.style.webkitTransition="",i=(e.changedTouches?e.changedTouches[0]:e).pageY,n=t.list.angle,t.updateInertiaParams(e,!0)},!1),t.holder.addEventListener(e.EVENT_END,function(e){r=!1,e.preventDefault(),t.startInertiaScroll(e)},!1),t.holder.addEventListener(e.EVENT_CANCEL,function(e){r=!1,e.preventDefault(),t.startInertiaScroll(e)},!1),t.holder.addEventListener(e.EVENT_MOVE,function(e){if(r){e.preventDefault();var a=(e.changedTouches?e.changedTouches[0]:e).pageY,l=a-i,s=t.calcAngle(l),o=l>0?n-s:n+s;o>t.endExceed&&(o=t.endExceed),o<t.beginExceed&&(o=t.beginExceed),t.setAngle(o),t.updateInertiaParams(e)}},!1),t.list.addEventListener("tap",function(e){elementItem=e.target,"LI"==elementItem.tagName&&t.setSelectedIndex(t.elementItems.indexOf(elementItem),200)},!1)},p.prototype.initInertiaParams=function(){var e=this;e.lastMoveTime=0,e.lastMoveStart=0,e.stopInertiaMove=!1},p.prototype.updateInertiaParams=function(e,t){var n=this,i=e.changedTouches?e.changedTouches[0]:e;if(t)n.lastMoveStart=i.pageY,n.lastMoveTime=e.timeStamp||Date.now(),n.startAngle=n.list.angle;else{var r=e.timeStamp||Date.now();r-n.lastMoveTime>300&&(n.lastMoveTime=r,n.lastMoveStart=i.pageY)}n.stopInertiaMove=!0},p.prototype.startInertiaScroll=function(e){var t=this,n=e.changedTouches?e.changedTouches[0]:e,i=e.timeStamp||Date.now(),r=(n.pageY-t.lastMoveStart)/(i-t.lastMoveTime),a=r>0?-1:1,l=6e-4*a*-1,s=Math.abs(r/l),o=r*s/2,c=t.list.angle,g=t.calcAngle(o)*a,d=g;return c+g<t.beginExceed&&(g=t.beginExceed-c,s=s*(g/d)*.6),c+g>t.endExceed&&(g=t.endExceed-c,s=s*(g/d)*.6),0==g?void t.endScroll():void t.scrollDistAngle(i,c,g,s)},p.prototype.scrollDistAngle=function(e,t,n,i){var r=this;r.stopInertiaMove=!1,function(e,t,n,i){var a=13,l=i/a,s=0;!function o(){if(!r.stopInertiaMove){var e=r.quartEaseOut(s,t,n,l);return r.setAngle(e),s++,s>l-1||e<r.beginExceed||e>r.endExceed?void r.endScroll():void setTimeout(o,a)}}()}(e,t,n,i)},p.prototype.quartEaseOut=function(e,t,n,i){return-n*((e=e/i-1)*e*e*e-1)+t},p.prototype.endScroll=function(){var e=this;if(e.list.angle<e.beginAngle)e.list.style.webkitTransition="150ms ease-out",e.setAngle(e.beginAngle);else if(e.list.angle>e.endAngle)e.list.style.webkitTransition="150ms ease-out",e.setAngle(e.endAngle);else{var t=parseInt((e.list.angle/e.itemAngle).toFixed(0));e.list.style.webkitTransition="100ms ease-out",e.setAngle(e.itemAngle*t)}e.triggerChange()},p.prototype.triggerChange=function(t){var n=this;setTimeout(function(){var i=n.getSelectedIndex(),r=n.items[i];!e.trigger||i==n.lastIndex&&t!==!0||e.trigger(n.holder,"change",{index:i,item:r}),n.lastIndex=i,"function"==typeof t&&t()},0)},p.prototype.correctAngle=function(e){var t=this;return e<t.beginAngle?t.beginAngle:e>t.endAngle?t.endAngle:e},p.prototype.setItems=function(e){var t=this;t.items=e||[];var n=[];t.items.forEach(function(e){null!==e&&e!==i&&n.push('<li data-id="'+e.id+'">'+(e.value||e)+"</li>")}),t.list.innerHTML=n.join(""),t.findElementItems(),t.calcElementItemPostion(),t.setAngle(t.correctAngle(t.list.angle)),t.triggerChange(!0)},p.prototype.getItems=function(){var e=this;return e.items},p.prototype.getSelectedIndex=function(){var e=this;return parseInt((e.list.angle/e.itemAngle).toFixed(0))},p.prototype.setSelectedIndex=function(e,t,n){var i=this;i.list.style.webkitTransition="";var r=i.correctAngle(i.itemAngle*e);if(t&&t>0){var a=r-i.list.angle;i.scrollDistAngle(Date.now(),i.list.angle,a,t)}else i.setAngle(r);i.triggerChange(n)},p.prototype.getSelectedItem=function(){var e=this;return e.items[e.getSelectedIndex()]},p.prototype.getSelectedValue=function(){var e=this;return(e.items[e.getSelectedIndex()]||{}).value},p.prototype.getSelectedText=function(){var e=this;return(e.items[e.getSelectedIndex()]||{}).text},p.prototype.setSelectedValue=function(e,t,n){var i=this;for(var r in i.items){var a=i.items[r];if(a.value==e)return void i.setSelectedIndex(r,t,n)}},e.fn&&(e.fn.picker=function(e){return this.each(function(t,n){if(!n.picker)if(e)n.picker=new p(n,e);else{var i=n.getAttribute("data-picker-options"),r=i?JSON.parse(i):{};n.picker=new p(n,r)}}),this[0]?this[0].picker:null},e.ready(function(){e(".shopex-picker").picker()}))}(window.shopex||window,window,document,void 0);